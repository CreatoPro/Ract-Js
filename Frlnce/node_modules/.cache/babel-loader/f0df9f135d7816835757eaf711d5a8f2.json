{"ast":null,"code":"var _jsxFileName = \"S:\\\\REACT\\\\Ract-Js\\\\Frlnce\\\\src\\\\pages\\\\resource\\\\ResourcePDFDetails.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./Resource.css\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport Card from 'react-bootstrap/Card';\nimport { getResource } from './../../_actions/resourceActions';\nimport Iframe from \"../../_components/iframe/iframe\";\nimport { ReactReader } from '../../_components/epub';\nconst storage = global.localStorage || null;\n\nclass ResourcePDFDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onLocationChanged = location => {\n      this.setState({\n        location\n      }, () => {\n        storage && storage.setItem('epub-location', location);\n      });\n    };\n\n    this.state = {\n      loading: false,\n      fullscreen: false,\n      location: storage && storage.getItem('epub-location') ? storage.getItem('epub-location') : 2,\n      localFile: null,\n      localName: null,\n      largeText: false\n    };\n    this.rendition = null;\n  }\n\n  componentDidMount() {\n    this.props.getResource(this.props.match.params.typeId, this.props.match.params.subTypeId);\n  }\n\n  routeChange(path) {\n    this.props.history.push(path);\n  }\n\n  render() {\n    let portlet = JSON.parse(localStorage.getItem('portlet'));\n    var content = \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ebook_details card_list mt60\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }\n    }, this.props.resource.map((item, index) => {\n      if (item.id == this.props.match.params.id) {\n        var _item$url, _item$url2, _item$url3, _item$url4;\n\n        if ((item === null || item === void 0 ? void 0 : (_item$url = item.url) === null || _item$url === void 0 ? void 0 : _item$url.slice(((item === null || item === void 0 ? void 0 : (_item$url2 = item.url) === null || _item$url2 === void 0 ? void 0 : _item$url2.lastIndexOf(\".\")) - 1 >>> 0) + 2)) == 'pdf') {\n          const url = window.location.protocol + \"//\" + window.location.host + \"/assets/js/pdfjs-1.1.366/web/viewer.html?file=\" + item.url;\n          content = /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 23\n            }\n          }, \" \", /*#__PURE__*/React.createElement(Iframe, {\n            url: url,\n            title: item.name,\n            class: \"iframe100\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 29\n            }\n          }), \" \");\n        } else if ((item === null || item === void 0 ? void 0 : (_item$url3 = item.url) === null || _item$url3 === void 0 ? void 0 : _item$url3.slice(((item === null || item === void 0 ? void 0 : (_item$url4 = item.url) === null || _item$url4 === void 0 ? void 0 : _item$url4.lastIndexOf(\".\")) - 1 >>> 0) + 2)) == 'epub') {\n          const {\n            location\n          } = this.state;\n          content = /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              position: \"relative\",\n              height: \"100vh\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ReactReader, {\n            url: item.url,\n            title: item.name,\n            location: location,\n            locationChanged: this.onLocationChanged,\n            getRendition: this.getRendition,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 19\n            }\n          })));\n        }\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: `module-header-step2 ${portlet.class ? portlet.class : 'orange-card'}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"back\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n          icon: faArrowLeft,\n          onClick: this.props.history.goBack,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }\n        })), /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }\n        }, item.name)), /*#__PURE__*/React.createElement(Card, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(Card.Body, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 19\n          }\n        }, content))));\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  resource: state.resource.resource\n});\n\nconst mapDispatchToProps = {\n  getResource: getResource\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourcePDFDetails);","map":{"version":3,"sources":["S:/REACT/Ract-Js/Frlnce/src/pages/resource/ResourcePDFDetails.js"],"names":["React","Component","connect","FontAwesomeIcon","faArrowLeft","Card","getResource","Iframe","ReactReader","storage","global","localStorage","ResourcePDFDetails","constructor","props","onLocationChanged","location","setState","setItem","state","loading","fullscreen","getItem","localFile","localName","largeText","rendition","componentDidMount","match","params","typeId","subTypeId","routeChange","path","history","push","render","portlet","JSON","parse","content","resource","map","item","index","id","url","slice","lastIndexOf","window","protocol","host","name","position","height","getRendition","class","goBack","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport \"./Resource.css\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faArrowLeft } from '@fortawesome/free-solid-svg-icons';\r\nimport Card from 'react-bootstrap/Card'\r\nimport {getResource} from './../../_actions/resourceActions';\r\nimport Iframe from \"../../_components/iframe/iframe\";\r\nimport { ReactReader } from '../../_components/epub';\r\n\r\nconst storage = global.localStorage || null\r\n\r\nclass ResourcePDFDetails extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: false,\r\n      fullscreen: false,\r\n      location:\r\n        storage && storage.getItem('epub-location')\r\n          ? storage.getItem('epub-location')\r\n          : 2,\r\n      localFile: null,\r\n      localName: null,\r\n      largeText: false\r\n    };\r\n    this.rendition = null\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.props.getResource(this.props.match.params.typeId,this.props.match.params.subTypeId);\r\n  }\r\n\r\n  routeChange(path) {\r\n    this.props.history.push(path);\r\n  }\r\n\r\n  onLocationChanged = location => {\r\n    this.setState(\r\n      {\r\n        location\r\n      },\r\n      () => {\r\n        storage && storage.setItem('epub-location', location)\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n\t  let portlet = JSON.parse(localStorage.getItem('portlet'));\r\n\t  var content =\"\";\r\n\t\treturn  <div className=\"ebook_details card_list mt60\"> \r\n\t\t{\r\n      this.props.resource.map((item, index) => {\r\n        if(item.id==this.props.match.params.id){\r\n          if(item?.url?.slice((item?.url?.lastIndexOf(\".\") - 1 >>> 0) + 2)=='pdf'){\r\n          const url = window.location.protocol + \"//\" + window.location.host +\"/assets/js/pdfjs-1.1.366/web/viewer.html?file=\"+item.url;\r\n            content = <div> <Iframe url={url} title={item.name} class=\"iframe100\" width=\"100%\" /> </div>\r\n          } else if(item?.url?.slice((item?.url?.lastIndexOf(\".\") - 1 >>> 0) + 2)=='epub'){\r\n            const { location } = this.state\r\n            content =\r\n              <div>\r\n                <div style={{ position: \"relative\", height: \"100vh\" }}>\r\n                  <ReactReader \r\n                    url= {item.url}\r\n                    title={item.name}\r\n                    location={location}\r\n                    locationChanged={this.onLocationChanged}\r\n                    getRendition={this.getRendition}\r\n                  />\r\n               </div>\r\n             </div>\r\n          }\r\n          return ( \r\n            <div key={index}>\r\n              <div className={`module-header-step2 ${portlet.class ? portlet.class : 'orange-card'}`}>\r\n              <div className=\"back\">\r\n                <FontAwesomeIcon icon={ faArrowLeft } onClick={this.props.history.goBack} />\r\n              </div>\r\n              <h4>{item.name}</h4>\r\n              </div>\r\n              <Card>\r\n                <Card.Body>\r\n                  <div className=\"\">\r\n\t\t\t\t\t          {content}\r\n                  </div>\r\n                </Card.Body>\r\n              </Card>\r\n          </div>\r\n          )\r\n        }\r\n      })\r\n    }\r\n    </div>\r\n  }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  resource: state.resource.resource\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getResource: getResource,\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps) (ResourcePDFDetails);\r\n"]},"metadata":{},"sourceType":"module"}