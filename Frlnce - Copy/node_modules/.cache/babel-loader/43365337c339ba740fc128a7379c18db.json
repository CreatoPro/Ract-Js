{"ast":null,"code":"var _jsxFileName = \"S:\\\\REACT\\\\Ract-Js\\\\Frlnce\\\\src\\\\pages\\\\learning\\\\LearningStepAttachments.js\";\nimport React, { Component } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport \"./Learning.css\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faArrowRight, faBook, faFileSignature } from '@fortawesome/free-solid-svg-icons';\nimport Card from 'react-bootstrap/Card';\nimport ApiService from \"../../_services/ApiService\";\nimport Loader from './../../_components/loader/loader';\nimport swal from 'sweetalert';\nimport Utils from \"../../_helpers/utils\";\nimport { StudyResourceType } from \"../../_constants/studyResourceTypes\";\n\nclass LearningStepAttachments extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      message: null,\n      loading: false,\n      showMsg: false\n    };\n    this.reloadLearningStepAttachmentsList = this.reloadLearningStepAttachmentsList.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadLearningStepAttachmentsList();\n  }\n\n  reloadLearningStepAttachmentsList() {\n    this.setState({\n      loading: true\n    }, () => {\n      ApiService.fetchLearningStepAttachments(this.props.match.params.id).then(res => {\n        this.setState({\n          loading: false,\n          list: res.data.attachments,\n          showMsg: true\n        });\n      });\n    });\n  }\n\n  routeChange(path, index) {\n    //this.props.history.push(path);\n    this.props.history.push({\n      pathname: path,\n      state: {\n        groupIndex: this.props.location.state.groupIndex,\n        stepIndex: this.props.location.state.stepIndex,\n        resourceIndex: index,\n        lessonPlanId: this.props.location.state.lessonPlanId\n      }\n    });\n  }\n\n  displayStudyResource(studyResource, path, index) {\n    console.log(\">>studyResource: \" + JSON.stringify(studyResource));\n    let _path = '';\n    let data = {\n      studyResource: studyResource\n    };\n\n    if (studyResource.typeId === StudyResourceType.FEEDBACK_FORM) {\n      _path = '/feedback/form/' + studyResource.id;\n      this.props.history.push({\n        pathname: _path,\n        state: data\n      });\n    } else {\n      this.props.history.push({\n        pathname: path,\n        state: {\n          groupIndex: this.props.location.state.groupIndex,\n          stepIndex: this.props.location.state.stepIndex,\n          resourceIndex: index,\n          lessonPlanId: this.props.location.state.lessonPlanId\n        }\n      });\n    }\n  }\n\n  downloadTest(testid) {\n    //|| Utils.isMobileDevice()===false\n\n    /*if(Utils.isMobileDevice()===true){\r\n         ApiService.fetchTest(testid)\r\n         .then((res) => {\r\n    \tif(res.data.status==1 && res.data.data.tests[0].testJSONFile!=\"TestJSONNotFound\"){\r\n    \t\tvar studentPdfResponse = res.data.data.tests[0].studentPdfResponse;\r\n    \t\tApiService.fetchTestJson(res.data.data.tests[0].testJSONFile)\r\n    \t\t.then((res) => {\r\n    \t\t\tthis.setState({tests: res.data});\r\n    \t\t\tvar oldTests = JSON.parse(localStorage.getItem('tests')) || [];\r\n    \t\t\tif (oldTests.filter(test=> test.id == testid).length == 0){\r\n    \t\t\t\tres.data.resume=0;\r\n    \t\t\t\tres.data.studentPdfResponse=studentPdfResponse;\r\n    \t\t\t\toldTests.push(res.data);  \r\n    \t\t\t\tlocalStorage.setItem('tests', JSON.stringify(oldTests));\t\t\r\n    \t\t\t\tthis.props.history.replace('/test-instructions/'+this.props.match.params.id+'/'+testid+'?lms=1&title='+this.props.match.params.title);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}else{\r\n    \t   let portlet = JSON.parse(localStorage.getItem('portlet'));\r\n    \t   swal({\r\n    \t\t\ttitle: \"Alert\",\r\n    \t\t\ttext: \"Online test not available. Please contact administrator\",\r\n    \t\t\tdangerMode: true,\r\n    \t\t\tclassName: portlet.class ? portlet.class : 'orange-card'\r\n    \t   });\r\n    \t}\r\n      });\r\n    }else{*/\n    //this.props.history.replace('/TestInstructions/'+testid+'?steps='+this.props.match.params.id,0,this.props.match.params.id);\n    window.open('/TestInstructions/' + testid + '?lms=' + this.props.match.params.id, \"Start Test\", 'height=' + window.screen.height + ',width=' + window.screen.width); //}\n  }\n\n  render() {\n    const {\n      loading\n    } = this.state;\n    let paramsString = this.props.location.search;\n    const params = new URLSearchParams(paramsString);\n    let portlet = JSON.parse(localStorage.getItem('portlet'));\n    localStorage.setItem('firstVisit', false);\n    let bak = params.get('back');\n    let back_url;\n\n    if (bak == \"quiz\") {\n      let portlet = JSON.parse(localStorage.getItem('portlet'));\n      let subcat = \"/lessonPlan/15/\" + portlet.params.resourceSubTypeId + \"/\" + portlet.params.name;\n      back_url = /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.routeChange(subcat),\n        className: \"text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faArrowLeft,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 81\n        }\n      }));\n    } else if (this.props.match.params.title == \"null\") {\n      let portlet = JSON.parse(localStorage.getItem('portlet'));\n      let subcat = \"/lessonPlan/15/\" + portlet.params.resourceSubTypeId + \"/Learning Modules\";\n      back_url = /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.routeChange(subcat),\n        className: \"text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faArrowLeft,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 80\n        }\n      }));\n    } else {\n      back_url = /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faArrowLeft,\n        onClick: this.props.history.goBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"LearningAttachment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"module-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `module-header-step2 ${portlet.class ? portlet.class : 'orange-card'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, back_url), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, this.props.match.params.title))), loading ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 27\n      }\n    }) : this.renderCard()));\n  }\n\n  renderCard() {\n    console.log(this.state.list);\n    let portlet = JSON.parse(localStorage.getItem('portlet'));\n    let paramsString = this.props.location.search;\n    const params = new URLSearchParams(paramsString);\n    let bak = params.get('back');\n\n    if (this.state.showMsg) {\n      if (this.state.list === undefined || this.state.list.length == 0) {\n        if (bak == \"quiz\") {\n          let subcat = \"/lessonPlan/15/\" + portlet.params.resourceSubTypeId + \"/Learning Modules\";\n          this.props.history.replace(subcat);\n        } else {\n          swal({\n            title: \"Alert\",\n            text: \"Content not Available\",\n            dangerMode: true,\n            className: portlet.class ? portlet.class : 'orange-card'\n          }).then(exitExam => {\n            this.props.history.goBack();\n          });\n        }\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 12\n      }\n    }, this.state.list && this.state.list.sort((a, b) => a.sortOrder - b.sortOrder).map((item, index) => {\n      if (item.type == \"test\") {\n        var button;\n\n        if (item.status == \"Launch\") {\n          var oldTests = JSON.parse(localStorage.getItem('tests')) || [];\n\n          if (oldTests.filter(test => test.id == item.id).length == 0) {\n            button = /*#__PURE__*/React.createElement(\"button\", {\n              onClick: () => this.downloadTest(item.id),\n              className: \"download blue-card\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 18\n              }\n            }, \"Launch\");\n          } else {\n            /*if(Utils.isMobileDevice()===true){\r\n                 button= <button onClick={() =>this.routeChange('/test-instructions/'+this.props.match.params.id+'/'+item.id+'?lms=1&title='+this.props.match.params.title)} className=\"download blue-card\">Launch</button>\r\n            }else{\r\n              button =  <button onClick={() => this.downloadTest(item.id)} className=\"download blue-card\">Launch</button>\r\n            }*/\n            button = /*#__PURE__*/React.createElement(\"button\", {\n              onClick: () => this.downloadTest(item.id),\n              className: \"download blue-card\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 17\n              }\n            }, \"Launch\");\n          }\n        } else if (item.status == \"Time Out\") {\n          button = /*#__PURE__*/React.createElement(\"button\", {\n            className: \"download blue-light-card\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 14\n            }\n          }, item.status);\n        } else if (item.status == \"View Result\") {\n          button = /*#__PURE__*/React.createElement(\"button\", {\n            onClick: () => this.routeChange('/test-result/' + this.props.match.params.id + '/' + item.id),\n            className: \"download green-card\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 14\n            }\n          }, item.status);\n        }\n\n        return /*#__PURE__*/React.createElement(Card, {\n          className: \"no_border_lrt\",\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(Card.Body, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n          className: \"Book\",\n          icon: faFileSignature,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 9\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"option\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 9\n          }\n        }, \" \", item.name, \"  \", button)));\n      } else {\n        return /*#__PURE__*/React.createElement(Card, {\n          className: \"no_border_lrt\",\n          key: index,\n          onClick: () => this.displayStudyResource(item, '/lesson/steps/attachments/' + this.props.match.params.id + '/details/' + item.id, index),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(Card.Body, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n          className: \"Book\",\n          icon: faBook,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 9\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"option\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 9\n          }\n        }, item.name, \" \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n          icon: faArrowRight,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 22\n          }\n        }))));\n      }\n    }));\n  }\n\n}\n\nexport default LearningStepAttachments;","map":{"version":3,"sources":["S:/REACT/Ract-Js/Frlnce/src/pages/learning/LearningStepAttachments.js"],"names":["React","Component","Container","FontAwesomeIcon","faArrowLeft","faArrowRight","faBook","faFileSignature","Card","ApiService","Loader","swal","Utils","StudyResourceType","LearningStepAttachments","constructor","props","state","list","message","loading","showMsg","reloadLearningStepAttachmentsList","bind","componentDidMount","setState","fetchLearningStepAttachments","match","params","id","then","res","data","attachments","routeChange","path","index","history","push","pathname","groupIndex","location","stepIndex","resourceIndex","lessonPlanId","displayStudyResource","studyResource","console","log","JSON","stringify","_path","typeId","FEEDBACK_FORM","downloadTest","testid","window","open","screen","height","width","render","paramsString","search","URLSearchParams","portlet","parse","localStorage","getItem","setItem","bak","get","back_url","subcat","resourceSubTypeId","name","title","goBack","class","renderCard","undefined","length","replace","text","dangerMode","className","exitExam","sort","a","b","sortOrder","map","item","type","button","status","oldTests","filter","test"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport \"./Learning.css\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faArrowLeft,faArrowRight,faBook,faFileSignature } from '@fortawesome/free-solid-svg-icons';\r\nimport Card from 'react-bootstrap/Card'\r\nimport ApiService from \"../../_services/ApiService\";\r\nimport Loader from './../../_components/loader/loader';\r\nimport swal from 'sweetalert';\r\nimport Utils from \"../../_helpers/utils\";\r\nimport { StudyResourceType } from \"../../_constants/studyResourceTypes\";\r\n\r\nclass LearningStepAttachments extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      list: [],\r\n      message: null,\r\n      loading: false,\r\n\t  showMsg:false\r\n    };\r\n    this.reloadLearningStepAttachmentsList = this.reloadLearningStepAttachmentsList.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadLearningStepAttachmentsList();\r\n  }\r\n\r\n  reloadLearningStepAttachmentsList() {\r\n    this.setState({ loading: true }, () => {\r\n      ApiService.fetchLearningStepAttachments(this.props.match.params.id)\r\n      .then((res) => {\r\n          this.setState({\r\n            loading: false,\r\n            list: res.data.attachments,\r\n\t\t\tshowMsg:true,\r\n          });\r\n      });\r\n    });\t\r\n  }\r\n\r\n  routeChange(path, index) {\r\n      //this.props.history.push(path);\r\n\t  this.props.history.push({\r\n\t\tpathname: path,\r\n\t\tstate: { groupIndex: this.props.location.state.groupIndex,stepIndex: this.props.location.state.stepIndex, resourceIndex: index, lessonPlanId: this.props.location.state.lessonPlanId}\r\n\t  });\r\n  }\r\n\r\n  displayStudyResource(studyResource, path, index) {\r\n    console.log(\">>studyResource: \"+JSON.stringify(studyResource))\r\n\tlet _path = '';\r\n    let data = {studyResource: studyResource};\r\n    if(studyResource.typeId===StudyResourceType.FEEDBACK_FORM) {\t\t\r\n\t\t_path = '/feedback/form/'+studyResource.id;\r\n\t\tthis.props.history.push({pathname: _path, state: data});\r\n    }\r\n    else {\r\n\t\tthis.props.history.push({\r\n\t\t\tpathname: path,\r\n\t\t\tstate: { groupIndex: this.props.location.state.groupIndex,stepIndex: this.props.location.state.stepIndex, resourceIndex: index, lessonPlanId: this.props.location.state.lessonPlanId}\r\n\t\t});  \r\n    }  \r\n  }\r\n    \r\n  downloadTest(testid) {\r\n\t//|| Utils.isMobileDevice()===false\r\n\t/*if(Utils.isMobileDevice()===true){\r\n      ApiService.fetchTest(testid)\r\n      .then((res) => {\r\n\t\tif(res.data.status==1 && res.data.data.tests[0].testJSONFile!=\"TestJSONNotFound\"){\r\n\t\t\tvar studentPdfResponse = res.data.data.tests[0].studentPdfResponse;\r\n\t\t\tApiService.fetchTestJson(res.data.data.tests[0].testJSONFile)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.setState({tests: res.data});\r\n\t\t\t\tvar oldTests = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\t\t\tif (oldTests.filter(test=> test.id == testid).length == 0){\r\n\t\t\t\t\tres.data.resume=0;\r\n\t\t\t\t\tres.data.studentPdfResponse=studentPdfResponse;\r\n\t\t\t\t\toldTests.push(res.data);  \r\n\t\t\t\t\tlocalStorage.setItem('tests', JSON.stringify(oldTests));\t\t\r\n\t\t\t\t\tthis.props.history.replace('/test-instructions/'+this.props.match.params.id+'/'+testid+'?lms=1&title='+this.props.match.params.title);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t   let portlet = JSON.parse(localStorage.getItem('portlet'));\r\n\t\t   swal({\r\n\t\t\t\ttitle: \"Alert\",\r\n\t\t\t\ttext: \"Online test not available. Please contact administrator\",\r\n\t\t\t\tdangerMode: true,\r\n\t\t\t\tclassName: portlet.class ? portlet.class : 'orange-card'\r\n\t\t   });\r\n\t\t}\r\n\t  });\r\n\t}else{*/\r\n\t\t//this.props.history.replace('/TestInstructions/'+testid+'?steps='+this.props.match.params.id,0,this.props.match.params.id);\r\n\t    window.open('/TestInstructions/'+testid+'?lms='+this.props.match.params.id, \"Start Test\", 'height=' + window.screen.height + ',width=' + window.screen.width);\r\n\t//}\r\n  }\r\n\r\n  render() {\r\n    const { loading } = this.state;\r\n\tlet paramsString = this.props.location.search;\r\n    const params = new URLSearchParams(paramsString);\r\n\tlet portlet = JSON.parse(localStorage.getItem('portlet'));\r\n\tlocalStorage.setItem('firstVisit', false);\r\n    let bak =  params.get('back');\r\n\tlet back_url;\r\n\tif(bak==\"quiz\"){\r\n\t  let portlet = JSON.parse(localStorage.getItem('portlet'));\r\n\t  let subcat = \"/lessonPlan/15/\"+portlet.params.resourceSubTypeId+\"/\"+portlet.params.name;\r\n\t  back_url = <a onClick={() =>this.routeChange(subcat)} className=\"text-white\"><FontAwesomeIcon icon={ faArrowLeft } /></a>;\r\n\t}else if(this.props.match.params.title==\"null\"){\r\n\t\tlet portlet = JSON.parse(localStorage.getItem('portlet'));\r\n\t\tlet subcat = \"/lessonPlan/15/\"+portlet.params.resourceSubTypeId+\"/Learning Modules\";\r\n\t\tback_url = <a onClick={() =>this.routeChange(subcat)} className=\"text-white\"><FontAwesomeIcon icon={ faArrowLeft } /></a>;\r\n\t}else{\r\n\t  back_url = <FontAwesomeIcon icon={ faArrowLeft } onClick={this.props.history.goBack} />\r\n\t}\r\n    return (\r\n      <div className=\"LearningAttachment\">\r\n        {\r\n          <Container fluid>\r\n              <div className=\"module-header\">\r\n               <div className={`module-header-step2 ${portlet.class ? portlet.class : 'orange-card'}`}>\r\n                <div className=\"back\">\r\n                  {back_url}\r\n                </div>\r\n                <h4>{this.props.match.params.title}</h4>\r\n                </div>\r\n              </div>\r\n              {loading ?  <Loader />: this.renderCard()}           \r\n          </Container>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCard() {\r\n\t  console.log(this.state.list);\r\n\t  let portlet = JSON.parse(localStorage.getItem('portlet'));\r\n\t  let paramsString = this.props.location.search;\r\n\t  const params = new URLSearchParams(paramsString);\r\n\t  let bak =  params.get('back');\r\n\t    if(this.state.showMsg){\r\n\t\t\tif(this.state.list ===undefined || this.state.list.length==0 ){\r\n\t\t\t\tif(bak==\"quiz\"){\r\n\t\t\t\t\tlet subcat = \"/lessonPlan/15/\"+portlet.params.resourceSubTypeId+\"/Learning Modules\";\r\n\t\t\t\t\tthis.props.history.replace(subcat);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswal({\r\n\t\t\t\t\t\ttitle: \"Alert\",\r\n\t\t\t\t\t\ttext: \"Content not Available\",\r\n\t\t\t\t\t\tdangerMode: true,\r\n\t\t\t\t\t\tclassName: portlet.class ? portlet.class : 'orange-card'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t  .then(exitExam => {\r\n\t\t\t\t\t\t this.props.history.goBack();\t\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t  \r\n\t  return  <div className=\"card_list\"> \r\n\t  {\r\n      this.state.list && this.state.list.sort((a, b) => a.sortOrder - b.sortOrder)\r\n      .map((item, index) => {\r\n\t\t      \r\n\t  \r\n\t\t\t  if(item.type==\"test\"){\r\n\t\t\t\t\r\n\t\t\t\t  var button;\r\n\t\t\t\t  if(item.status==\"Launch\"){\r\n\t\t\t\t\tvar oldTests = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\t\t\t\tif (oldTests.filter(test=> test.id == item.id).length == 0){\r\n\t\t\t\t\t  button =  <button onClick={() => this.downloadTest(item.id)} className=\"download blue-card\">Launch</button>\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t/*if(Utils.isMobileDevice()===true){\r\n\t\t\t\t\t      button= <button onClick={() =>this.routeChange('/test-instructions/'+this.props.match.params.id+'/'+item.id+'?lms=1&title='+this.props.match.params.title)} className=\"download blue-card\">Launch</button>\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t  button =  <button onClick={() => this.downloadTest(item.id)} className=\"download blue-card\">Launch</button>\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\tbutton =  <button onClick={() => this.downloadTest(item.id)} className=\"download blue-card\">Launch</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t  }else if(item.status == \"Time Out\"){\r\n\t\t\t\t\tbutton= <button className=\"download blue-light-card\">{item.status}</button>\r\n\t\t\t\t  }else if(item.status == \"View Result\"){\r\n\t\t\t\t\tbutton= <button onClick={() => this.routeChange('/test-result/'+this.props.match.params.id+'/'+item.id)} className=\"download green-card\">{item.status}</button>\r\n\t\t\t\t  }\r\n\t\t\t\t  \r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Card className=\"no_border_lrt\" key={index}>\r\n\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t  <FontAwesomeIcon className=\"Book\" icon={ faFileSignature } /> \r\n\t\t\t\t\t\t  <p className=\"option\"> {item.name}  {button}</p>  \r\n\t\t\t\t\t</Card.Body>\r\n\t\t\t\t  </Card>\r\n\t\t\t\t)\r\n\t\t\t  }else{\r\n\t\t\t\t  return (\r\n\t\t\t\t\t<Card className=\"no_border_lrt\" key={index} onClick={() => this.displayStudyResource(item,'/lesson/steps/attachments/'+ this.props.match.params.id + '/details/' + item.id, index)}>\r\n\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t  <FontAwesomeIcon className=\"Book\" icon={ faBook } /> \r\n\t\t\t\t\t\t  <p className=\"option\">\r\n\t\t\t\t\t\t   {item.name} <FontAwesomeIcon icon={ faArrowRight }  />\r\n\t\t\t\t\t\t  </p> \r\n\t\t\t\t\t</Card.Body>\r\n\t\t\t\t  </Card>\r\n\t\t\t\t  )\r\n\t\t\t  }\r\n\t\t  })\r\n\t\t}\r\n    </div>\r\n  }\r\n\r\n}\r\n\r\nexport default LearningStepAttachments;\r\n"]},"metadata":{},"sourceType":"module"}