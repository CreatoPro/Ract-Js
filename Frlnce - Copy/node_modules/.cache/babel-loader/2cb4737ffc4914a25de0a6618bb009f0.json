{"ast":null,"code":"var _jsxFileName = \"S:\\\\REACT\\\\Ract-Js\\\\Frlnce\\\\src\\\\pages\\\\timetable\\\\TimeTable.jsx\";\nimport React, { Component } from \"react\";\nimport \"./timetable.css\";\nimport { Container, Modal } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faVideo } from '@fortawesome/free-solid-svg-icons';\nimport ApiService from \"../../_services/ApiService\";\nimport UserService from '../../_services/UserService';\nimport { ILoader } from './../../_components/iloader/iloader';\nimport HorizontalDatePicker from './../../_components/horizontal-date-picker/HorizontalDatePicker';\nimport DatePicker from 'react-mobile-datepicker';\nimport list from \"../../_assets/imgs/calendar.svg\";\nimport swal from 'sweetalert';\n\nclass TimeTable extends Component {\n  constructor(props) {\n    var _this$props, _this$props$location, _this$props$location$;\n\n    super(props);\n\n    this.showAlert = () => {\n      const wrapper = document.createElement('div');\n      wrapper.innerHTML = this.state.payMessage;\n      swal({\n        title: \"Alert\",\n        content: wrapper,\n        dangerMode: true,\n        buttons: true,\n        className: 'blue-card'\n      }).then(willResume => {\n        if (willResume) {}\n      });\n    };\n\n    this.onSelectedDay = selectedDate => {\n      //console.log(\"selectedDate : \"+selectedDate);\n      this.setState({\n        selectedTimeTable: this.state.timeTableData[this.parseDate(selectedDate)],\n        currentDate: selectedDate\n      });\n    };\n\n    this.monthMap = {\n      '1': 'Jan',\n      '2': 'Feb',\n      '3': 'Mar',\n      '4': 'Apr',\n      '5': 'May',\n      '6': 'Jun',\n      '7': 'Jul',\n      '8': 'Aug',\n      '9': 'Sep',\n      '10': 'Oct',\n      '11': 'Nov',\n      '12': 'Dec'\n    };\n    this.dateConfig = {\n      'year': {\n        format: 'YYYY',\n        caption: 'Year',\n        step: 1\n      },\n      'month': {\n        format: value => this.monthMap[value.getMonth() + 1],\n        caption: 'Month',\n        step: 1\n      },\n      'date': {\n        format: 'DD',\n        caption: 'Day',\n        step: 1\n      } // 'hour': {\n      //     format: 'hh',\n      //     caption: 'Hour',\n      //     step: 1,\n      // },\n      // 'minute': {\n      //     format: 'mm',\n      //     caption: 'Min',\n      //     step: 1,\n      // },\n      // 'second': {\n      //     format: 'hh',\n      //     caption: 'Sec',\n      //     step: 1,\n      // },\n\n    };\n\n    this.handleClick = () => {\n      this.setState({\n        showCalendar: true\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        showCalendar: false\n      });\n    };\n\n    this.handleSelect = time => {\n      //console.log(\"Time : \", time);\n      this.setState({\n        time: time,\n        currentDate: time,\n        showCalendar: false\n      }, () => {\n        this.init();\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState(state => ({\n        showVideo: !this.state.showVideo\n      }));\n    };\n\n    this.state = {\n      message: null,\n      showLoading: false,\n      timeTableData: null,\n      selectedTimeTable: null,\n      portlet: (_this$props = this.props) === null || _this$props === void 0 ? void 0 : (_this$props$location = _this$props.location) === null || _this$props$location === void 0 ? void 0 : (_this$props$location$ = _this$props$location.state) === null || _this$props$location$ === void 0 ? void 0 : _this$props$location$.portlet,\n      showCalendar: false,\n      time: new Date(),\n      currentDate: new Date(),\n      showVideo: false,\n      videoDetails: null\n    };\n  }\n\n  componentDidMount() {\n    this.payCheck();\n  }\n\n  payCheck() {\n    this.setState({\n      showLoading: true\n    }, () => {\n      let payLoad = {\n        \"type\": \"lms\"\n      };\n      ApiService.studentPayCheck(payLoad).then(res => {\n        this.setState({\n          showLoading: false,\n          payType: res.data.type,\n          payMessage: res.data.message\n        });\n        this.init();\n      });\n    });\n  }\n\n  init() {\n    let prev_date = new Date(this.state.time);\n    prev_date.setDate(this.state.time.getDate() - 1);\n    let next_date = new Date(this.state.time);\n    next_date.setDate(this.state.time.getDate() + 29);\n    let searchParams = {\n      \"startDate\": this.parseDate(prev_date),\n      \"endDate\": this.parseDate(next_date),\n      \"enquiryId\": localStorage.getItem('enquiryId')\n    }; //console.log(\"searchParams: \"+JSON.stringify(searchParams));\n\n    this.setState({\n      showLoading: true\n    }, () => {\n      ApiService.getTimeTables(searchParams).then(res => {\n        var _res$data, _res$data$data;\n\n        this.parseTimeTableData((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$data = _res$data.data) === null || _res$data$data === void 0 ? void 0 : _res$data$data.timeTableDataBeans) || []);\n      });\n    });\n  }\n\n  parseTimeTableData(timeTableDataBeans) {\n    let timetableJSON = {};\n\n    for (let t = 0; t < timeTableDataBeans.length; t++) {\n      timetableJSON[timeTableDataBeans[t].dateString] = timeTableDataBeans[t];\n    }\n\n    this.setState({\n      showLoading: false,\n      timeTableData: timetableJSON,\n      selectedTimeTable: timetableJSON[this.parseDate(this.state.currentDate)]\n    }); //console.log(\"timetableJSON : \"+JSON.stringify(timetableJSON));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ilearn-full-height page-payments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, this.renderHeader(), this.renderBody(), this.renderLoader())));\n  }\n\n  renderHeader() {\n    var _this$state, _this$state$portlet, _this$props2, _this$props2$history, _this$state2, _this$state2$portlet;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: `ilearn-plain-header ${(_this$state = this.state) === null || _this$state === void 0 ? void 0 : (_this$state$portlet = _this$state.portlet) === null || _this$state$portlet === void 0 ? void 0 : _this$state$portlet.class}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faArrowLeft,\n      onClick: (_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : (_this$props2$history = _this$props2.history) === null || _this$props2$history === void 0 ? void 0 : _this$props2$history.goBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, (_this$state2 = this.state) === null || _this$state2 === void 0 ? void 0 : (_this$state2$portlet = _this$state2.portlet) === null || _this$state2$portlet === void 0 ? void 0 : _this$state2$portlet.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"calendar\",\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"calendar\",\n      className: \"calendar-icon\",\n      src: list,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    })));\n  }\n\n  renderBody() {\n    let timetable = this.state.selectedTimeTable;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HorizontalDatePicker, {\n      selectedDay: this.onSelectedDay,\n      enableScroll: true,\n      enableDays: 30,\n      customSelectedDate: this.state.time,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ilearn-padding-both-sides ilearn-padding-top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, timetable && timetable.activitySlotDataBeans.map((activitySlot, index) => {\n      var _activitySlot$studyRe;\n\n      //alert(JSON.stringify(activitySlot?.studyResourceIds))\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: \"card bg-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 37\n        }\n      }, activitySlot.batchName), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 37\n        }\n      }, activitySlot.topicName, \" \")), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"float-left text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 33\n        }\n      }, activitySlot.startTime + ' - ' + activitySlot.endTime), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 131\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"float-left text-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 33\n        }\n      }, activitySlot.instructorName), activitySlot.showZoomMeeting ? this.state.payType == 2 ? /*#__PURE__*/React.createElement(\"a\", {\n        className: \"btn btn-primary float-right\",\n        onClick: () => this.showAlert(),\n        style: {\n          padding: '1px 5px '\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faVideo,\n        size: \"lg\",\n        color: \"#fff\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 45\n        }\n      }), \" \\xA0 Online Class\") : /*#__PURE__*/React.createElement(\"a\", {\n        className: \"btn btn-primary float-right\",\n        href: activitySlot.zoomMeetingJoinUrl,\n        target: \"_blank\",\n        style: {\n          padding: '1px 5px '\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faVideo,\n        size: \"lg\",\n        color: \"#fff\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 41\n        }\n      }), \" \\xA0 Online Class\") : '', !activitySlot.showZoomMeeting ? activitySlot.zoomMeetingId ? this.state.payType == 2 ? /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-warning float-right\",\n        onClick: () => this.showAlert(),\n        style: {\n          padding: '1px 5px '\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faVideo,\n        size: \"lg\",\n        color: \"#fff\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 53\n        }\n      }), \" \\xA0 Recorded Video\") : (activitySlot === null || activitySlot === void 0 ? void 0 : activitySlot.studyResourceIds) == null ? /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-warning float-right\",\n        onClick: () => this.showRecordeVideo(activitySlot, null),\n        style: {\n          padding: '1px 5px '\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faVideo,\n        size: \"lg\",\n        color: \"#fff\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 53\n        }\n      }), \" \\xA0 Recorded Video\") : (activitySlot === null || activitySlot === void 0 ? void 0 : (_activitySlot$studyRe = activitySlot.studyResourceIds) === null || _activitySlot$studyRe === void 0 ? void 0 : _activitySlot$studyRe.length) && (activitySlot === null || activitySlot === void 0 ? void 0 : activitySlot.studyResourceIds.map((studyResourceId, index) => {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, index === 0 ? /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 69\n          }\n        }) : '', /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-warning \",\n          onClick: () => this.showRecordeVideo(activitySlot, studyResourceId),\n          style: {\n            padding: '1px 5px ',\n            margin: '5px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 53\n          }\n        }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n          icon: faVideo,\n          size: \"lg\",\n          color: \"#fff\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 57\n          }\n        }), \" \\xA0 Recorded Video \", index + 1));\n      })) : '' : ''));\n    })), !timetable && !this.state.showLoading && /*#__PURE__*/React.createElement(\"div\", {\n      class: \"alert alert-warning text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      class: \"alert-heading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 25\n      }\n    }, \"Free Day!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 25\n      }\n    }, \"Yippie! No classes for today.\"))), /*#__PURE__*/React.createElement(DatePicker, {\n      isOpen: this.state.showCalendar,\n      theme: 'android',\n      showHeader: true,\n      showCaption: true,\n      dateConfig: this.dateConfig,\n      onSelect: this.handleSelect,\n      onCancel: this.handleCancel,\n      confirmText: 'SET',\n      cancelText: 'CANCEL',\n      value: this.state.currentDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 13\n      }\n    }), this.showVideoModal());\n  }\n\n  renderLoader() {\n    const _loadingText = 'Please wait...';\n    return /*#__PURE__*/React.createElement(ILoader, {\n      loadingText: _loadingText,\n      isShow: this.state.showLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }\n    });\n  }\n\n  showVideoModal() {\n    var _this$state3, _this$state3$portlet;\n\n    let videoDetails = this.state.videoDetails; //console.log(videoDetails);\n\n    let content = '';\n\n    if ((videoDetails === null || videoDetails === void 0 ? void 0 : videoDetails.status) == 2) {\n      content = videoDetails.message;\n    } else {\n      if ((videoDetails === null || videoDetails === void 0 ? void 0 : videoDetails.type) == \"vimeo\") {\n        let url = videoDetails.url;\n\n        if (!url.includes(\"player\")) {\n          url = new URL(url);\n          url = url.pathname.substring(1);\n          url = url.substring(0, url.lastIndexOf(\"/\") + 1);\n          url = \"https://player.vimeo.com/video/\" + url;\n        }\n\n        content = /*#__PURE__*/React.createElement(\"iframe\", {\n          title: videoDetails.name,\n          height: \"300\",\n          width: \"100%\",\n          src: url,\n          allowfullscreen: \"allowfullscreen\",\n          mozallowfullscreen: \"mozallowfullscreen\",\n          msallowfullscreen: \"msallowfullscreen\",\n          oallowfullscreen: \"oallowfullscreen\",\n          webkitallowfullscreen: \"webkitallowfullscreen\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 29\n          }\n        });\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showVideo,\n      size: \"lg\",\n      onHide: () => this.handleClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      className: `ilearn-plain-header text-white ${(_this$state3 = this.state) === null || _this$state3 === void 0 ? void 0 : (_this$state3$portlet = _this$state3.portlet) === null || _this$state3$portlet === void 0 ? void 0 : _this$state3$portlet.class}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 17\n      }\n    }, \" \", (videoDetails === null || videoDetails === void 0 ? void 0 : videoDetails.name) || 'Alert', \" \")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }\n    }, (videoDetails === null || videoDetails === void 0 ? void 0 : videoDetails.status) == 2 ? /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: content\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 29\n      }\n    }) : content, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }\n    }))));\n  }\n\n  showRecordeVideo(activitySlotBean, studyResourceId) {\n    //console.log('showRecordeVideo: ', activitySlotBean);\n    let searchParams = {\n      \"activitySlotTemplateId\": activitySlotBean.activitySlotId,\n      \"batchId\": activitySlotBean.batchId,\n      \"userId\": UserService.getUserId(),\n      \"studyResourceId\": studyResourceId\n    };\n    this.setState({\n      showLoading: true\n    }, () => {\n      ApiService.getRecordedVideos(searchParams).then(res => {\n        console.log(res);\n        this.setState({\n          showLoading: false,\n          videoDetails: res.data,\n          showVideo: true\n        });\n      });\n    });\n  }\n\n  parseDate(_date) {\n    let dd = String(_date.getDate()).padStart(2, '0');\n    let mm = String(_date.getMonth() + 1).padStart(2, '0'); //January is 0!\n\n    let yyyy = _date.getFullYear();\n\n    return dd + '/' + mm + '/' + yyyy;\n  }\n\n}\n\nexport { TimeTable };","map":{"version":3,"sources":["S:/REACT/Ract-Js/Frlnce/src/pages/timetable/TimeTable.jsx"],"names":["React","Component","Container","Modal","FontAwesomeIcon","faArrowLeft","faVideo","ApiService","UserService","ILoader","HorizontalDatePicker","DatePicker","swal","TimeTable","constructor","props","showAlert","wrapper","document","createElement","innerHTML","state","payMessage","title","content","dangerMode","buttons","className","then","willResume","onSelectedDay","selectedDate","setState","selectedTimeTable","timeTableData","parseDate","currentDate","monthMap","dateConfig","format","caption","step","value","getMonth","handleClick","showCalendar","handleCancel","handleSelect","time","init","handleClose","showVideo","message","showLoading","portlet","location","Date","videoDetails","componentDidMount","payCheck","payLoad","studentPayCheck","res","payType","data","type","prev_date","setDate","getDate","next_date","searchParams","localStorage","getItem","getTimeTables","parseTimeTableData","timeTableDataBeans","timetableJSON","t","length","dateString","render","renderHeader","renderBody","renderLoader","class","history","goBack","name","list","timetable","activitySlotDataBeans","map","activitySlot","index","batchName","topicName","startTime","endTime","instructorName","showZoomMeeting","padding","zoomMeetingJoinUrl","zoomMeetingId","studyResourceIds","showRecordeVideo","studyResourceId","margin","showVideoModal","_loadingText","status","url","includes","URL","pathname","substring","lastIndexOf","__html","activitySlotBean","activitySlotId","batchId","getUserId","getRecordedVideos","console","log","_date","dd","String","padStart","mm","yyyy","getFullYear"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./timetable.css\";\r\nimport { Container, Modal } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faArrowLeft, faVideo} from '@fortawesome/free-solid-svg-icons';\r\nimport ApiService from \"../../_services/ApiService\";\r\nimport UserService from '../../_services/UserService';\r\nimport {ILoader} from './../../_components/iloader/iloader';\r\nimport HorizontalDatePicker from './../../_components/horizontal-date-picker/HorizontalDatePicker';\r\nimport DatePicker from 'react-mobile-datepicker';\r\nimport list from \"../../_assets/imgs/calendar.svg\";\r\nimport swal from 'sweetalert';\r\n\r\nclass TimeTable extends Component { \r\n\r\n\tconstructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            message: null,\r\n            showLoading: false,\r\n            timeTableData: null,\r\n            selectedTimeTable: null,\r\n            portlet: this.props?.location?.state?.portlet,\r\n            showCalendar: false,\r\n            time: new Date(),\r\n            currentDate: new Date(),\r\n            showVideo: false,\r\n            videoDetails: null,\r\n        };\r\n    }\r\n    \r\n    componentDidMount() {\r\n        this.payCheck();\r\n    }\r\n\r\n\r\n    payCheck() {\r\n        this.setState({ showLoading: true }, () => {\r\n          let payLoad = {\r\n            \"type\": \"lms\",\r\n          };\r\n          ApiService.studentPayCheck(payLoad)\r\n          .then((res) => {\r\n              this.setState({\r\n                showLoading: false,\r\n                payType : res.data.type,\r\n                payMessage : res.data.message\r\n              });\r\n              this.init();\r\n          });\r\n        });\t\r\n    }\r\n\r\n    showAlert = () => {\r\n        const wrapper = document.createElement('div');\r\n        wrapper.innerHTML = this.state.payMessage;\r\n        swal({\r\n          title: \"Alert\",\r\n          content: wrapper,\r\n          dangerMode: true,\r\n          buttons: true,\r\n          className: 'blue-card'\r\n        })\r\n        .then((willResume) => {\r\n          if (willResume) {\r\n             \r\n          }\r\n        });\r\n\t}\r\n\r\n\r\n    onSelectedDay = (selectedDate) =>{\r\n        //console.log(\"selectedDate : \"+selectedDate);\r\n        this.setState({\r\n            selectedTimeTable : this.state.timeTableData[this.parseDate(selectedDate)],\r\n            currentDate: selectedDate\r\n        });\r\n    };\r\n\r\n    monthMap = {\r\n        '1': 'Jan',\r\n        '2': 'Feb',\r\n        '3': 'Mar',\r\n        '4': 'Apr',\r\n        '5': 'May',\r\n        '6': 'Jun',\r\n        '7': 'Jul',\r\n        '8': 'Aug',\r\n        '9': 'Sep',\r\n        '10': 'Oct',\r\n        '11': 'Nov',\r\n        '12': 'Dec',\r\n    };\r\n\r\n    dateConfig = {\r\n        'year': {\r\n            format: 'YYYY',\r\n            caption: 'Year',\r\n            step: 1,\r\n        },\r\n        'month': {\r\n            format: value => this.monthMap[value.getMonth()+1],\r\n            caption: 'Month',\r\n            step: 1,\r\n        },\r\n        'date': {\r\n            format: 'DD',\r\n            caption: 'Day',\r\n            step: 1,\r\n        },\r\n        // 'hour': {\r\n        //     format: 'hh',\r\n        //     caption: 'Hour',\r\n        //     step: 1,\r\n        // },\r\n        // 'minute': {\r\n        //     format: 'mm',\r\n        //     caption: 'Min',\r\n        //     step: 1,\r\n        // },\r\n        // 'second': {\r\n        //     format: 'hh',\r\n        //     caption: 'Sec',\r\n        //     step: 1,\r\n        // },\r\n    }\r\n\r\n    handleClick = () => {\r\n\t\tthis.setState({ showCalendar: true });\r\n\t}\r\n\r\n\thandleCancel = () => {\r\n\t\tthis.setState({ showCalendar: false });\r\n\t}\r\n\r\n\thandleSelect = (time) => {\r\n        //console.log(\"Time : \", time);\r\n        this.setState({ time:time, currentDate: time, showCalendar: false }, () => {\r\n            this.init();\r\n        });        \r\n\t}\r\n    \r\n    init() {\r\n        let prev_date = new Date(this.state.time);\r\n        prev_date.setDate(this.state.time.getDate() - 1);\r\n\r\n        let next_date = new Date(this.state.time);\r\n        next_date.setDate(this.state.time.getDate()+29);\r\n        let searchParams={\r\n            \"startDate\": this.parseDate(prev_date),\r\n            \"endDate\": this.parseDate(next_date),\r\n            \"enquiryId\": localStorage.getItem('enquiryId')\r\n        }\r\n        //console.log(\"searchParams: \"+JSON.stringify(searchParams));\r\n        this.setState({ showLoading: true }, () => {\r\n            ApiService.getTimeTables(searchParams)\r\n            .then((res) => {\r\n              this.parseTimeTableData(res?.data?.data?.timeTableDataBeans || []);              \r\n            });\r\n        });\r\n    }\r\n\r\n    parseTimeTableData(timeTableDataBeans) {\r\n        let timetableJSON = {}; \r\n        for(let t=0; t < timeTableDataBeans.length; t++) {\r\n            timetableJSON[timeTableDataBeans[t].dateString] = timeTableDataBeans[t];\r\n        }\r\n        this.setState({\r\n            showLoading: false,\r\n            timeTableData : timetableJSON,\r\n            selectedTimeTable : timetableJSON[this.parseDate(this.state.currentDate)]\r\n        });\r\n        //console.log(\"timetableJSON : \"+JSON.stringify(timetableJSON));\r\n    }\r\n    \r\n    render() {\r\n        return (  \r\n            <>\r\n                <div className=\"ilearn-full-height page-payments\">\r\n                    <Container fluid >\r\n                        {this.renderHeader()}\r\n                        {this.renderBody()}\r\n                        {this.renderLoader()}                    \r\n                    </Container>\r\n                </div>\r\n            </>           \r\n              \r\n        );       \r\n    }\r\n\r\n    renderHeader() {\r\n        return (\r\n            <div className={`ilearn-plain-header ${this.state?.portlet?.class}`}>\r\n                <div className=\"back\">\r\n                <FontAwesomeIcon icon={ faArrowLeft } onClick={this.props?.history?.goBack} />\r\n                </div>\r\n                <h4>{this.state?.portlet?.name}</h4>\r\n                <div className=\"calendar\" onClick={this.handleClick}>\r\n                    <img alt=\"calendar\" className=\"calendar-icon\" src={list} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    renderBody() {\r\n        let timetable = this.state.selectedTimeTable;\r\n        return (\r\n            <>\r\n            <HorizontalDatePicker selectedDay={this.onSelectedDay} enableScroll={true} enableDays={30} customSelectedDate={this.state.time}/> \r\n            <div className=\"ilearn-padding-both-sides ilearn-padding-top\">\r\n            <div class=\"card-columns\">\r\n                {\r\n                   timetable && \r\n                   timetable.activitySlotDataBeans.map((activitySlot, index) => {\r\n                    //alert(JSON.stringify(activitySlot?.studyResourceIds))\r\n                    return ( \r\n                        <div key={index}  className=\"card bg-info\">\r\n                            <div className=\"card-body\">\r\n                                <div className=\"text-center text-white\">\r\n                                    <h3>{activitySlot.batchName}</h3>\r\n                                    <h4>{activitySlot.topicName} </h4>\r\n                                </div>\r\n                                <span className=\"float-left text-white\">{activitySlot.startTime+' - '+activitySlot.endTime}</span><br/>\r\n                                <span className=\"float-left text-white\">{activitySlot.instructorName}</span>\r\n                                {\r\n                                    activitySlot.showZoomMeeting ? \r\n                                        this.state.payType ==2 ?\r\n                                        <a className=\"btn btn-primary float-right\"  \r\n                                            onClick={() => this.showAlert()} \r\n                                            style={{padding: '1px 5px '}}>\r\n                                            <FontAwesomeIcon icon={ faVideo }  size = 'lg' color='#fff'/> &nbsp;\r\n                                            Online Class\r\n                                        </a>\r\n                                        :\r\n                                        <a className=\"btn btn-primary float-right\"  \r\n                                        href={activitySlot.zoomMeetingJoinUrl} \r\n                                        target=\"_blank\"  \r\n                                        style={{padding: '1px 5px '}}>\r\n                                        <FontAwesomeIcon icon={ faVideo }  size = 'lg' color='#fff'/> &nbsp;\r\n                                        Online Class\r\n                                        </a>\r\n                                        : ''\r\n                                }\r\n                                {\r\n                                    !activitySlot.showZoomMeeting ? \r\n                                        activitySlot.zoomMeetingId ?\r\n                                            this.state.payType ==2 ?\r\n                                                <button className=\"btn btn-warning float-right\" \r\n                                                    onClick={() => this.showAlert()} \r\n                                                    style={{padding: '1px 5px '}}>\r\n                                                    <FontAwesomeIcon icon={ faVideo }  size = 'lg' color='#fff'/> &nbsp;\r\n                                                    Recorded Video\r\n                                                </button>\r\n                                            : \r\n                                            activitySlot?.studyResourceIds==null ?\r\n                                                <button className=\"btn btn-warning float-right\" \r\n                                                    onClick={() => this.showRecordeVideo(activitySlot,null)} \r\n                                                    style={{padding: '1px 5px '}}>\r\n                                                    <FontAwesomeIcon icon={ faVideo }  size = 'lg' color='#fff'/> &nbsp;\r\n                                                    Recorded Video\r\n                                                </button>\r\n                                            :\r\n                                            activitySlot?.studyResourceIds?.length && activitySlot?.studyResourceIds.map((studyResourceId, index) => {\r\n                                                return ( \r\n                                                    <>\r\n                                                    { index === 0 ? <br /> : '' }\r\n                                                    <button className=\"btn btn-warning \" \r\n                                                        onClick={() => this.showRecordeVideo(activitySlot,studyResourceId)} \r\n                                                        style={{padding: '1px 5px ', margin: '5px'}}>\r\n                                                        <FontAwesomeIcon icon={ faVideo }  size = 'lg' color='#fff'/> &nbsp;\r\n                                                        Recorded Video {index+1}\r\n                                                    </button>\r\n                                                    </>\r\n                                                )\r\n                                            })\r\n                                        : ''\r\n                                    :''\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                    })\r\n                }                \r\n            </div>\r\n                {\r\n                    !timetable && !this.state.showLoading && \r\n                    <div class=\"alert alert-warning text-center\">\r\n                        <h4 class=\"alert-heading\">Free Day!</h4>\r\n                        <p>Yippie! No classes for today.</p>\r\n                    </div>\r\n                }\r\n            </div>\r\n            <DatePicker\r\n                isOpen={this.state.showCalendar}\r\n                theme={'android'}\r\n                showHeader\r\n                showCaption\r\n                dateConfig={this.dateConfig}\r\n                onSelect={this.handleSelect}\r\n                onCancel={this.handleCancel} \r\n                confirmText={'SET'} \r\n                cancelText={'CANCEL'}\r\n                value={this.state.currentDate}\r\n\r\n            />\r\n            {\r\n                this.showVideoModal()\r\n            }\r\n            </>\r\n        )\r\n    }\r\n    \r\n    renderLoader() {\r\n        const _loadingText = 'Please wait...';\r\n        return (\r\n            <ILoader\r\n                loadingText={_loadingText}\r\n                isShow={this.state.showLoading}\r\n                >\r\n            </ILoader>\r\n        )\r\n    }\r\n\r\n    showVideoModal() {\r\n        let videoDetails = this.state.videoDetails;\r\n        //console.log(videoDetails);\r\n        let content = '';\r\n        if(videoDetails?.status==2) {\r\n            content = videoDetails.message;\r\n        }\r\n        else { \r\n            if(videoDetails?.type==\"vimeo\"){\r\n                let url = videoDetails.url;\r\n                if(!url.includes(\"player\")) {\r\n                    url = new URL(url);\r\n                    url = url.pathname.substring(1);\r\n                    url = url.substring(0, url.lastIndexOf(\"/\") + 1);\r\n                    url = \"https://player.vimeo.com/video/\"+url;\r\n                }\r\n                content =   <iframe title={videoDetails.name} height=\"300\" width=\"100%\" src={url} allowfullscreen=\"allowfullscreen\" mozallowfullscreen=\"mozallowfullscreen\" msallowfullscreen=\"msallowfullscreen\" oallowfullscreen=\"oallowfullscreen\" webkitallowfullscreen=\"webkitallowfullscreen\"></iframe> \r\n            }\r\n        }\r\n        return (\r\n            <>\r\n            <Modal show={this.state.showVideo} size=\"lg\" onHide={()=> this.handleClose()}>\r\n                <Modal.Header closeButton className={`ilearn-plain-header text-white ${this.state?.portlet?.class}`}>\r\n                <Modal.Title> {videoDetails?.name || 'Alert'} </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {\r\n                        videoDetails?.status==2 ?\r\n                            <div dangerouslySetInnerHTML={{ __html:content}} />\r\n                        : content\r\n                    }\r\n                <br />\r\n                </Modal.Body>\r\n            </Modal>\r\n            </>\r\n        );\r\n    }\r\n\r\n    handleClose = () => \r\n    {\r\n        this.setState(state => ({ showVideo: !this.state.showVideo}));        \r\n    }\r\n\r\n    showRecordeVideo(activitySlotBean,studyResourceId) {  \r\n        //console.log('showRecordeVideo: ', activitySlotBean);\r\n        let searchParams = {\r\n            \"activitySlotTemplateId\": activitySlotBean.activitySlotId,\r\n            \"batchId\": activitySlotBean.batchId,\r\n            \"userId\": UserService.getUserId(),\r\n            \"studyResourceId\":studyResourceId\r\n        }\r\n        this.setState({ showLoading: true }, () => {\r\n            ApiService.getRecordedVideos(searchParams)\r\n            .then((res) => {\r\n                console.log(res)\r\n                this.setState({\r\n                    showLoading: false,\r\n                    videoDetails : res.data,\r\n                    showVideo: true,\r\n                });           \r\n            });\r\n        });\r\n    }\r\n\r\n    parseDate(_date) {\r\n        let dd = String(_date.getDate()).padStart(2, '0');\r\n        let mm = String(_date.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n        let yyyy = _date.getFullYear();\r\n\r\n        return dd + '/' + mm + '/' + yyyy;\r\n    }\r\n\r\n}\r\n  \r\nexport {TimeTable};"]},"metadata":{},"sourceType":"module"}