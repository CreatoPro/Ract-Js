{"ast":null,"code":"var _jsxFileName = \"S:\\\\REACT\\\\Ract-Js\\\\Frlnce\\\\src\\\\pages\\\\exam-upload\\\\ExamUploadDetails.js\";\nimport React, { Component } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport ApiService from \"../../_services/ApiService\";\nimport Loader from './../../_components/loader/loader';\nimport \"./ExamUpload.css\";\nimport Parser from 'html-react-parser';\nimport dateFormat from 'dateformat';\n\nclass ExamUploadDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onFileChange = event => {\n      // Update the state \n      var File = event.target.files[0];\n      this.setState({\n        selectedFile: File\n      });\n\n      if (!File) {\n        this.setState({\n          invalidImage: 'Please Upload your handwritten PDF File.'\n        });\n        return false;\n      }\n\n      if (!File.name.match(/\\.(pdf|PDF)$/)) {\n        this.setState({\n          invalidImage: 'Please select PDF File.'\n        });\n        return false;\n      } else {\n        this.setState({\n          invalidImage: ''\n        });\n      }\n    };\n\n    this.onFileUpload = () => {\n      // Create an object of formData \n      const formData = new FormData(); // Update the formData object \n\n      if (this.state.selectedFile) {\n        let portlet = JSON.parse(localStorage.getItem('portlet')) || [];\n        var compltedDate = this.props.location.state.testEndTime;\n        var submitDateBefore = \"\";\n\n        if (compltedDate) {\n          var d = new Date(compltedDate);\n          var minutes = portlet.params.secondsActiveAfterExamSubmit / 60;\n          var newtime = d.setMinutes(d.getMinutes() + minutes);\n          submitDateBefore = dateFormat(newtime, \"yyyy-mm-dd HH:MM:ss\"); //submitDateBefore = \"2020-09-30 23:00:00\";\n        }\n\n        formData.append('dateBefore', submitDateBefore);\n        formData.append(\"answersheetFile\", this.state.selectedFile, this.state.selectedFile.name);\n        var testId = this.props.match.params.id;\n        this.setState({\n          loading: true\n        }, () => {\n          ApiService.uploadFile(formData, testId).then(res => {\n            this.setState({\n              loading: false\n            });\n\n            if (res.data.type == \"error\") {\n              this.setState({\n                invalidImage: res.data.message\n              });\n            } else if (res.data.type == \"timeout\") {\n              this.setState({\n                invalidImage: portlet.params.TimeoutMessage\n              });\n            } else {\n              if (res.data.url) {\n                this.props.history.push({\n                  pathname: '/exam/pdfview/' + testId,\n                  state: {\n                    pdfpreview: res.data.url,\n                    testEndTime: compltedDate\n                  }\n                });\n              }\n            }\n          }).catch(err => {\n            console.log(err);\n            this.setState({\n              invalidImage: err\n            });\n          });\n        }); // Details of the uploaded file \n\n        console.log(this.state.selectedFile);\n      } else {\n        this.setState({\n          invalidImage: 'Please Upload your handwritten PDF File.'\n        });\n      }\n    };\n\n    this.state = {\n      message: null,\n      loading: false,\n      result: 0,\n      selectedFile: null,\n      invalidImage: \"\",\n      submitDateBefore: \"\"\n    };\n  }\n\n  componentDidMount() {}\n\n  routeChange(path) {\n    this.props.history.push(path);\n  }\n\n  render() {\n    const {\n      loading\n    } = this.state;\n    let portlet = JSON.parse(localStorage.getItem('portlet')) || [];\n    var compltedDate = this.props.location.state.testEndTime;\n\n    if (compltedDate) {\n      var d = new Date(compltedDate);\n      var minutes = portlet.params.secondsActiveAfterExamSubmit / 60;\n      var newtime = d.setMinutes(d.getMinutes() + minutes); //var submitDateBefore = dateFormat(newtime, \"yyyy-mm-dd HH:MM:ss\");\n      //this.setState({ submitDateBefore: submitDateBefore });\n\n      var submit_time = dateFormat(newtime, \"h:MM TT\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"testlist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"learn-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `module-header-step2 AnalysisReport ${portlet.class ? portlet.class : 'orange-card'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faArrowLeft,\n      onClick: () => this.routeChange('/examUpload'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 6\n      }\n    }, \"Exam Uploads\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"testResult testFileupload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, \"Upload PDF\"), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"help-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, Parser(portlet.params.DisplayTextOnUploadScreen)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, \"You have to complete the upload process by: \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 64\n      }\n    }, submit_time)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"custom-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      class: \"custom-file-input\",\n      id: \"customFile\",\n      name: \"answersheetFile\",\n      onChange: this.onFileChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      class: \"custom-file-label\",\n      for: \"customFile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 19\n      }\n    }, this.state.selectedFile ? this.state.selectedFile.name : 'Choose file', \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, this.state.invalidImage), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-primary full-width\",\n      onClick: this.onFileUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, \"Upload File\"))), loading ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 23\n      }\n    }) : \"\"));\n  }\n\n}\n\nexport default ExamUploadDetails;","map":{"version":3,"sources":["S:/REACT/Ract-Js/Frlnce/src/pages/exam-upload/ExamUploadDetails.js"],"names":["React","Component","Container","FontAwesomeIcon","faArrowLeft","ApiService","Loader","Parser","dateFormat","ExamUploadDetails","constructor","props","onFileChange","event","File","target","files","setState","selectedFile","invalidImage","name","match","onFileUpload","formData","FormData","state","portlet","JSON","parse","localStorage","getItem","compltedDate","location","testEndTime","submitDateBefore","d","Date","minutes","params","secondsActiveAfterExamSubmit","newtime","setMinutes","getMinutes","append","testId","id","loading","uploadFile","then","res","data","type","message","TimeoutMessage","url","history","push","pathname","pdfpreview","catch","err","console","log","result","componentDidMount","routeChange","path","render","submit_time","class","DisplayTextOnUploadScreen"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faArrowLeft } from '@fortawesome/free-solid-svg-icons';\r\nimport ApiService from \"../../_services/ApiService\";\r\nimport Loader from './../../_components/loader/loader';\r\nimport \"./ExamUpload.css\";\r\nimport Parser from 'html-react-parser';\r\nimport dateFormat from 'dateformat';\r\n\r\nclass ExamUploadDetails extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      message: null,\r\n      loading: false,\r\n      result: 0,\r\n      selectedFile: null,\r\n      invalidImage:\"\",\r\n      submitDateBefore:\"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  onFileChange = event => {  \r\n    // Update the state \r\n    var File = event.target.files[0];\r\n    this.setState({ selectedFile: File });\r\n    if (!File) {\r\n      this.setState({ invalidImage: 'Please Upload your handwritten PDF File.' });\r\n      return false;\r\n    }\r\n   \r\n    if (!File.name.match(/\\.(pdf|PDF)$/)) {\r\n      this.setState({ invalidImage: 'Please select PDF File.' });\r\n      return false;\r\n    }else{\r\n      this.setState({ invalidImage: '' });\r\n    }\r\n\r\n  };\r\n\r\n  onFileUpload = () => { \r\n    // Create an object of formData \r\n    const formData = new FormData(); \r\n    // Update the formData object \r\n    if(this.state.selectedFile){\r\n      let portlet = JSON.parse(localStorage.getItem('portlet')) || [];\r\n      var compltedDate = this.props.location.state.testEndTime;\r\n      var submitDateBefore =\"\";\r\n      if(compltedDate){\r\n        var d = new Date(compltedDate);\r\n        var minutes = portlet.params.secondsActiveAfterExamSubmit/60;\r\n        var newtime = d.setMinutes ( d.getMinutes() + minutes );\r\n        submitDateBefore = dateFormat(newtime, \"yyyy-mm-dd HH:MM:ss\");\r\n        //submitDateBefore = \"2020-09-30 23:00:00\";\r\n      }\r\n      formData.append('dateBefore', submitDateBefore);\r\n      formData.append( \r\n        \"answersheetFile\", \r\n        this.state.selectedFile, \r\n        this.state.selectedFile.name,    \r\n      );\r\n      var testId = this.props.match.params.id;\r\n      this.setState({ loading: true }, () => {\r\n        ApiService.uploadFile(formData,testId)\r\n        .then((res) => {\r\n            this.setState({\r\n              loading: false,\r\n            });\r\n            if(res.data.type==\"error\"){\r\n              this.setState({ invalidImage: res.data.message });\r\n            }else if(res.data.type==\"timeout\"){\r\n              this.setState({ invalidImage: portlet.params.TimeoutMessage });\r\n            }else{\r\n              if(res.data.url){\r\n                this.props.history.push({ pathname: '/exam/pdfview/'+testId, state: { pdfpreview: res.data.url, testEndTime: compltedDate} });\r\n              }\r\n              \r\n            }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          this.setState({ invalidImage: err });\r\n        });\r\n      });\r\n\r\n       // Details of the uploaded file \r\n       console.log(this.state.selectedFile);        \r\n  \r\n    }else{\r\n      this.setState({ invalidImage: 'Please Upload your handwritten PDF File.' });\r\n    }\r\n    \r\n  }; \r\n\r\n  routeChange(path) {\r\n    this.props.history.push(path);\r\n  }\r\n\r\n  render() {\r\n    const { loading } = this.state;\r\n    let portlet = JSON.parse(localStorage.getItem('portlet')) || [];\r\n    var compltedDate = this.props.location.state.testEndTime;\r\n    if(compltedDate){\r\n      var d = new Date(compltedDate);\r\n      var minutes = portlet.params.secondsActiveAfterExamSubmit/60;\r\n      var newtime = d.setMinutes ( d.getMinutes() + minutes );\r\n      //var submitDateBefore = dateFormat(newtime, \"yyyy-mm-dd HH:MM:ss\");\r\n      //this.setState({ submitDateBefore: submitDateBefore });\r\n      var submit_time = dateFormat(newtime, \"h:MM TT\");\r\n    }\r\n    \r\n    return (\r\n      <div className=\"testlist\">\r\n        {\r\n          <Container fluid>\r\n          <div className=\"learn-header\">\r\n          <div className={`module-header-step2 AnalysisReport ${portlet.class ? portlet.class : 'orange-card'}`}>\r\n\t\t\t\t\t<div className=\"back\">\r\n\t\t\t\t\t  <FontAwesomeIcon icon={ faArrowLeft } onClick={() => this.routeChange('/examUpload') } />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h4>Exam Uploads</h4>\r\n          </div>\r\n          </div>\r\n          <div className=\"testResult testFileupload\">\r\n              <div className=\"\">\r\n                <h4>Upload PDF</h4>\r\n                <p class=\"help-block\">{Parser(portlet.params.DisplayTextOnUploadScreen)}</p>\r\n                <p>You have to complete the upload process by: <strong>{submit_time}</strong></p>\r\n                <div class=\"custom-file\">\r\n                  <input type=\"file\" class=\"custom-file-input\" id=\"customFile\" name=\"answersheetFile\" onChange={this.onFileChange}/>\r\n                  <label class=\"custom-file-label\" for=\"customFile\">{this.state.selectedFile ? this.state.selectedFile.name : 'Choose file'} </label>\r\n                </div>\r\n                <p class=\"error\">{this.state.invalidImage}</p>\r\n                <button type=\"submit\" class=\"btn btn-primary full-width\" onClick={this.onFileUpload}>Upload File</button>\r\n              </div>\r\n          </div>\r\n          {loading ?  <Loader /> : \"\"}\r\n          </Container>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default ExamUploadDetails;\r\n"]},"metadata":{},"sourceType":"module"}