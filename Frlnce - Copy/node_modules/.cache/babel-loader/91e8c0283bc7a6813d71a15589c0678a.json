{"ast":null,"code":"var _jsxFileName = \"S:\\\\REACT\\\\Ract-Js\\\\Frlnce\\\\src\\\\pages\\\\home\\\\desktop\\\\index.jsx\";\nimport React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\nimport \"./style.css\";\nimport \"./float-label-min.css\";\nimport cw_logo from \"./../images/cw_logo.png\";\nimport Config from \"../../../_config/config\";\nimport ApiService from \"../../../_services/ApiService\";\nimport OTPValidator from './../../../_components/OTPValidator';\nimport { ILoader } from './../../../_components/iloader/iloader';\nimport Button from \"react-bootstrap/Button\";\nimport FacebookLoginComponent from './../../login/FacebookLoginComponent';\nimport jwt_decode from \"jwt-decode\";\n\nclass DesktopHome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.routeInstituteCard = card => {\n      //console.log(JSON.stringify(card));\n      this.props.history.push({\n        pathname: '/instituteCardDetail',\n        state: {\n          card: card\n        }\n      });\n    };\n\n    this.updateInput = e => {\n      let v = e.target.value;\n      let k = e.target.name;\n      let loginDetails = { ...this.state.loginDetails\n      };\n      loginDetails[k] = v;\n      this.setState({\n        loginDetails\n      });\n    };\n\n    this.handleKeypress = e => {\n      console.log(\"key : \" + e.charCode);\n\n      if (e.charCode === 13) {\n        this.login();\n      }\n    };\n\n    this.onOTPValidatorClose = value => {\n      if (value === true) {\n        var loginUserData = this.state.loginUserData;\n        var decoded = jwt_decode(loginUserData.token);\n        localStorage.setItem('user', JSON.stringify(this.state.loginUserData));\n        localStorage.setItem('tenant', decoded.tenant);\n        this.props.history.push('/');\n      } else {\n        let _otpValidator = {\n          show: false,\n          otp: null,\n          smsAddress: null,\n          message: 'Successfully sent the One Time Password to your Registered Mobile Number',\n          userId: null\n        };\n        this.setState({\n          otpValidator: _otpValidator\n        });\n      }\n    };\n\n    this.state = {\n      info: null,\n      message: null,\n      loading: false,\n      loaderStyle: '',\n      errorMessage: null,\n      connectionErrorMsg: null,\n      loginDetails: {\n        username: '',\n        password: ''\n      },\n      otpValidator: {\n        show: false,\n        otpLength: 0,\n        smsAddress: null,\n        message: 'Successfully sent the One Time Password to your Registered Mobile Number',\n        userId: null\n      },\n      loginUserData: null\n    };\n  }\n\n  componentDidMount() {\n    this.init();\n  }\n\n  init() {\n    let paramsString = this.props.location.search;\n    const params = new URLSearchParams(paramsString);\n    let token = params.get('token');\n    this.setState({\n      loading: true,\n      loaderStyle: token ? 'dark' : ''\n    }, () => {\n      ApiService.fetchHome().then(res => {\n        console.log(JSON.stringify(res.data.data));\n        this.setState({\n          loading: false,\n          info: res.data.data\n        });\n\n        if (token) {\n          this.loginToken(token);\n        }\n      }, error => {\n        //ErrorCB\n        this.setState({\n          loading: false,\n          connectionErrorMsg: Config.CONNECTION_ERROR_MSG\n        });\n      });\n    });\n  }\n\n  render() {\n    var _info$loginPageConfig, _info$loginPageConfig2, _info$loginPageConfig3;\n\n    let auth = JSON.parse(localStorage.getItem('user'));\n\n    if (auth != null) {\n      let paramsString = this.props.location.search;\n      const params = new URLSearchParams(paramsString);\n      let token = params.get('token');\n\n      if (!token) {\n        this.props.history.push('dashboard');\n      }\n    }\n\n    const info = this.state.info; // console.log(info?.loginPageConfig,'text');\n\n    const {\n      Text1\n    } = (info === null || info === void 0 ? void 0 : info.loginPageConfig) || '';\n    console.log(Text1, 'text'); //console.log(\"Info : \"+JSON.stringify(info));\n\n    const show_registration_btn = (info === null || info === void 0 ? void 0 : (_info$loginPageConfig = info.loginPageConfig) === null || _info$loginPageConfig === void 0 ? void 0 : _info$loginPageConfig.SHOW_REGISTER_BUTTON) === 'true' ? true : false;\n    const show_facebook_btn = (info === null || info === void 0 ? void 0 : (_info$loginPageConfig2 = info.loginPageConfig) === null || _info$loginPageConfig2 === void 0 ? void 0 : _info$loginPageConfig2.FACEBOOK_LOGIN) === 'true' ? true : false;\n    let desktop_hero_imgs = info === null || info === void 0 ? void 0 : (_info$loginPageConfig3 = info.loginPageConfig) === null || _info$loginPageConfig3 === void 0 ? void 0 : _info$loginPageConfig3.desktopHeroImage;\n    let dektop_hero_img = \"\"; //let dektop_hero_img = \"https://staticfiles.edusquares.com/images/login-background.png\";\n\n    if (desktop_hero_imgs) {\n      dektop_hero_img = desktop_hero_imgs[Math.floor(Math.random() * desktop_hero_imgs.length)];\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"home-container MuiGrid-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home-col-left MuiGrid-item MuiGrid-grid-sm-4 MuiGrid-grid-md-7\",\n      style: {\n        backgroundImage: `url(${dektop_hero_img})`,\n        backgroundSize: `100% 100%`,\n        backgroundColor: `#fafafa`,\n        backgroundRepeat: `no-repeat`,\n        backgroundPosition: `center`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home-col-right MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-8 MuiGrid-grid-md-5 MuiPaper-elevation6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"margin-top-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: Config.logo,\n      className: \"institute_logo\",\n      alt: \"Logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"institute-top-intro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"gradient-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 57\n      }\n    }, \" \", info === null || info === void 0 ? void 0 : info.instituteName, \" \"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"login-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"has-float-label col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      class: \"form-control login-input\",\n      id: \"username\",\n      type: \"text\",\n      name: \"username\",\n      onChange: this.updateInput,\n      outline: true,\n      size: \"lg\",\n      placeholder: \" \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 37\n      }\n    }, \"Username *\"))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"has-float-label col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      class: \"form-control login-input\",\n      id: \"password\",\n      type: \"password\",\n      name: \"password\",\n      onChange: this.updateInput,\n      onKeyPress: this.handleKeypress,\n      outline: true,\n      size: \"lg\",\n      placeholder: \" \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 37\n      }\n    }, \"Password *\"))), this.state.errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 58\n      }\n    }, this.state.errorMessage), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"primary login button-full ilearn-blue-btn button-md\",\n      type: \"button\",\n      onClick: () => this.login(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button-inner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 33\n      }\n    }, \" SIGN IN \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"MuiGrid-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"MuiGrid-item MuiGrid-grid-xs-true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"login-link\",\n      href: \"/forgetpwd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 37\n      }\n    }, \"Forgot password?\")), show_registration_btn && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"MuiGrid-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"login-link\",\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 37\n      }\n    }, \"Don't have an account? Sign Up\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }), show_facebook_btn && /*#__PURE__*/React.createElement(FacebookLoginComponent, Object.assign({}, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    })))), Text1 && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"terms-and-conditions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }, Text1), this.renderCard(), /*#__PURE__*/React.createElement(OTPValidator, {\n      data: this.state.otpValidator,\n      onOTPValidatorClose: this.onOTPValidatorClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }), this.renderLoader(), this.renderFooter())));\n  }\n\n  renderFooter() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"MuiGrid-grid-xs-12 MuiGrid-grid-sm-8 MuiGrid-grid-md-5 powered-by-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, this.state.connectionErrorMsg && /*#__PURE__*/React.createElement(\"div\", {\n      class: \"off-line\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 51\n      }\n    }, this.state.connectionErrorMsg), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"powered-by\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"powered-by-text text-alignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, \"Copyright \\xA9 \\xA0\", /*#__PURE__*/React.createElement(\"a\", {\n      className: \"login-link\",\n      href: \"https://conceptwaves.com/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cw_logo,\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 29\n      }\n    })), \" 2022.\")));\n  }\n\n  renderLoader() {\n    const _loadingText = 'Please wait...';\n    return /*#__PURE__*/React.createElement(ILoader, {\n      loadingText: _loadingText,\n      isShow: this.state.loading,\n      loaderStyle: this.state.loaderStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderCard() {\n    var _data$cards;\n\n    let data = this.state.info;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hashbg home-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, (data === null || data === void 0 ? void 0 : data.cards) && (data === null || data === void 0 ? void 0 : (_data$cards = data.cards) === null || _data$cards === void 0 ? void 0 : _data$cards.map((item, index) => {\n      return /*#__PURE__*/React.createElement(Button, {\n        key: index,\n        variant: \"primary login button-full ilearn-white-btn button-md\",\n        onClick: () => this.routeInstituteCard(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: Config.logo,\n        alt: item.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 19\n        }\n      }), \" \", item.name);\n    })));\n  }\n\n  login() {\n    let {\n      loginDetails\n    } = this.state;\n\n    if (loginDetails.username && loginDetails.password) {\n      this.setState({\n        loading: true,\n        connectionErrorMsg: null\n      }, () => {\n        ApiService.fetchLogin(loginDetails.username, loginDetails.password).then(res => {\n          if (res.data.status === 1) {\n            this.setState({\n              loading: false,\n              loginUserData: res.data.data\n            }, () => {\n              this.dologin();\n            });\n          } else {\n            this.setState({\n              loading: false,\n              errorMessage: res.data.message\n            });\n          }\n        }, error => {\n          //ErrorCB\n          this.setState({\n            loading: false,\n            connectionErrorMsg: Config.CONNECTION_ERROR_MSG\n          });\n        });\n      });\n    }\n  }\n\n  loginToken(token) {\n    if (token) {\n      console.log('here');\n      if (Config.siteTitle === 'unsat' || Config.siteTitle === 'unsat2') this.dologin(token);\n      this.setState({\n        loading: true,\n        loaderStyle: 'dark',\n        connectionErrorMsg: null\n      }, () => {\n        ApiService.fetchLoginToken(token).then(res => {\n          if (res.data.status === 1) {\n            this.setState({\n              loading: false,\n              loginUserData: res.data.data\n            }, () => {\n              this.dologin();\n            });\n          } else {\n            this.setState({\n              loading: false,\n              errorMessage: res.data.message\n            });\n          }\n        }, error => {\n          //ErrorCB\n          this.setState({\n            loading: false,\n            connectionErrorMsg: Config.CONNECTION_ERROR_MSG\n          });\n        });\n      });\n    }\n  }\n\n  dologin() {\n    let reqToken = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    console.log('here');\n    let loginUserData = this.state.loginUserData;\n    var decoded = jwt_decode((loginUserData === null || loginUserData === void 0 ? void 0 : loginUserData.token) || reqToken);\n    if (reqToken) decoded['token'] = reqToken;\n    let paramsString = this.props.location.search;\n    const params = new URLSearchParams(paramsString);\n    let token = params.get('token');\n    let testId = params.get('testId');\n    let target = params.get('target');\n\n    if (token || testId) {\n      localStorage.setItem('user', JSON.stringify(loginUserData || decoded));\n      localStorage.setItem('enquiryId', (loginUserData === null || loginUserData === void 0 ? void 0 : loginUserData.enquiryId) || (decoded === null || decoded === void 0 ? void 0 : decoded.enquiryId));\n      localStorage.setItem('tenant', decoded.tenant);\n\n      if (testId) {\n        this.props.history.push('/TestInstructions/' + testId + '?cat=0');\n      } else if (target) {\n        this.props.history.push('/' + target);\n      } else {\n        this.props.history.push('/');\n      }\n    } else if (loginUserData.otpEnableStatus && loginUserData.otpEnableStatus === 1) {\n      let _otpValidator = {\n        show: true,\n        otpLength: loginUserData.otpLength,\n        smsAddress: loginUserData.smsAddress,\n        message: loginUserData.otpMessage,\n        userId: loginUserData.userId\n      };\n      this.setState({\n        otpValidator: _otpValidator\n      });\n    } else {\n      localStorage.setItem('user', JSON.stringify(loginUserData));\n      localStorage.setItem('enquiryId', loginUserData.enquiryId);\n      localStorage.setItem('tenant', decoded.tenant); //localStorage.setItem('user', JSON.stringify(loginUserData));\n      //localStorage.setItem('user', JSON.stringify(loginUserData));\n\n      this.props.history.push('/');\n    }\n  }\n\n}\n\nexport default DesktopHome;","map":{"version":3,"sources":["S:/REACT/Ract-Js/Frlnce/src/pages/home/desktop/index.jsx"],"names":["React","Component","Link","cw_logo","Config","ApiService","OTPValidator","ILoader","Button","FacebookLoginComponent","jwt_decode","DesktopHome","constructor","props","routeInstituteCard","card","history","push","pathname","state","updateInput","e","v","target","value","k","name","loginDetails","setState","handleKeypress","console","log","charCode","login","onOTPValidatorClose","loginUserData","decoded","token","localStorage","setItem","JSON","stringify","tenant","_otpValidator","show","otp","smsAddress","message","userId","otpValidator","info","loading","loaderStyle","errorMessage","connectionErrorMsg","username","password","otpLength","componentDidMount","init","paramsString","location","search","params","URLSearchParams","get","fetchHome","then","res","data","loginToken","error","CONNECTION_ERROR_MSG","render","auth","parse","getItem","Text1","loginPageConfig","show_registration_btn","SHOW_REGISTER_BUTTON","show_facebook_btn","FACEBOOK_LOGIN","desktop_hero_imgs","desktopHeroImage","dektop_hero_img","Math","floor","random","length","backgroundImage","backgroundSize","backgroundColor","backgroundRepeat","backgroundPosition","logo","instituteName","renderCard","renderLoader","renderFooter","_loadingText","cards","map","item","index","fetchLogin","status","dologin","siteTitle","fetchLoginToken","reqToken","testId","enquiryId","otpEnableStatus","otpMessage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport \"./style.css\";\r\nimport \"./float-label-min.css\"\r\nimport cw_logo from \"./../images/cw_logo.png\";\r\nimport Config from \"../../../_config/config\";\r\nimport ApiService from \"../../../_services/ApiService\";\r\nimport OTPValidator from './../../../_components/OTPValidator';\r\nimport {ILoader} from './../../../_components/iloader/iloader';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport FacebookLoginComponent from './../../login/FacebookLoginComponent'\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nclass DesktopHome extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            info: null,\r\n            message: null,\r\n            loading: false,\r\n            loaderStyle:'',\r\n            errorMessage: null,\r\n            connectionErrorMsg: null,\r\n            loginDetails:{\r\n                username: '',\r\n                password: ''\r\n            },\r\n            otpValidator: { show:false, \r\n                otpLength: 0, \r\n                smsAddress: null, \r\n                message:'Successfully sent the One Time Password to your Registered Mobile Number',\r\n                userId: null\r\n            },\r\n            loginUserData: null,\r\n        };    \r\n    }\r\n\r\n    componentDidMount() {\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n\r\n        let paramsString = this.props.location.search;\r\n        const params = new URLSearchParams(paramsString);\r\n        let token =  params.get('token');\r\n\r\n        this.setState({ loading: true, loaderStyle: token ? 'dark':'' }, () => {\r\n            ApiService.fetchHome()\r\n            .then((res) => {\r\n                console.log(JSON.stringify(res.data.data));\r\n                this.setState({\r\n                    loading: false,\r\n                    info: res.data.data\r\n                });\r\n\r\n                \r\n                if(token){ this.loginToken(token); }\r\n            },\r\n            error => { //ErrorCB\r\n                this.setState({loading:false, \r\n                connectionErrorMsg: Config.CONNECTION_ERROR_MSG});\r\n            });\r\n        });\t\r\n    }    \r\n\r\n    render() {\r\n        let auth = JSON.parse(localStorage.getItem('user'));\r\n        if(auth != null){\r\n            let paramsString = this.props.location.search;\r\n            const params = new URLSearchParams(paramsString);\r\n            let token =  params.get('token');\r\n            if(!token){\r\n              this.props.history.push('dashboard');\r\n            }\r\n        }\r\n        const info = this.state.info;\r\n\r\n        // console.log(info?.loginPageConfig,'text');\r\n        const { Text1 } = info?.loginPageConfig || '';\r\n        console.log(Text1,'text');\r\n        //console.log(\"Info : \"+JSON.stringify(info));\r\n        const show_registration_btn = info?.loginPageConfig?.SHOW_REGISTER_BUTTON==='true'?true:false;\r\n        const show_facebook_btn = info?.loginPageConfig?.FACEBOOK_LOGIN==='true'?true:false;\r\n        let desktop_hero_imgs = info?.loginPageConfig?.desktopHeroImage;\r\n        let dektop_hero_img = \"\";\r\n        //let dektop_hero_img = \"https://staticfiles.edusquares.com/images/login-background.png\";\r\n        if(desktop_hero_imgs) {\r\n            dektop_hero_img = desktop_hero_imgs[Math.floor(Math.random() * desktop_hero_imgs.length)];\r\n        }\r\n        return (            \r\n        <div className=\"home\">\r\n            {\r\n            <main className=\"home-container MuiGrid-container\">\r\n                <div className=\"home-col-left MuiGrid-item MuiGrid-grid-sm-4 MuiGrid-grid-md-7\"\r\n                style={{backgroundImage: `url(${dektop_hero_img})`, backgroundSize: `100% 100%`, backgroundColor: `#fafafa`, backgroundRepeat: `no-repeat`, backgroundPosition: `center`}}\r\n                ></div>\r\n                <div className=\"home-col-right MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-8 MuiGrid-grid-md-5 MuiPaper-elevation6\">\r\n                    <div className=\"login-container\">\r\n                        <div className=\"margin-top-2\">\r\n                            <img src={Config.logo} className=\"institute_logo\" alt=\"Logo\"/>\r\n                        </div>\r\n                        <div className=\"institute-top-intro\">\r\n                            <span class=\"gradient-text\"><strong> {info?.instituteName} </strong></span>\r\n                        </div>\r\n                        <br/>\r\n                        <form className=\"login-form\"> \r\n                            <div class=\"form-group input-group\">\r\n                                <span class=\"has-float-label col-sm-12\">\r\n                                    <input class=\"form-control login-input\" id=\"username\" type=\"text\" name=\"username\" onChange={this.updateInput} outline size=\"lg\" placeholder=\" \"/>\r\n                                    <label for=\"username\">Username *</label>\r\n                                </span>\r\n                            </div>\r\n                            <div class=\"form-group input-group\">\r\n                                <span class=\"has-float-label col-sm-12\">\r\n                                    <input class=\"form-control login-input\" id=\"password\" type=\"password\" name=\"password\" onChange={this.updateInput} onKeyPress={this.handleKeypress} outline size=\"lg\" placeholder=\" \"/>\r\n                                    <label for=\"password\">Password *</label>\r\n                                </span>\r\n                            </div>\r\n                            { this.state.errorMessage && <div className=\"error-message\">{this.state.errorMessage}</div> }\r\n                            <button className=\"primary login button-full ilearn-blue-btn button-md\" type=\"button\" onClick={() => this.login()}>\r\n                                <span className=\"button-inner\"> SIGN IN </span>\r\n                            </button>\r\n                            {/*<button className=\"primary login button-full ilearn-blue-btn button-md\" type=\"button\" onClick={() => this.loginToken()}>\r\n                                <span className=\"button-inner\"> SIGN IN Using Token </span>\r\n                            </button>*/}         \r\n                            <div className=\"MuiGrid-container\">\r\n                                <div className=\"MuiGrid-item MuiGrid-grid-xs-true\">\r\n                                    <a className=\"login-link\" href=\"/forgetpwd\">Forgot password?</a>\r\n                                </div>\r\n                                {\r\n                                 show_registration_btn &&  \r\n                                <div className=\"MuiGrid-item\">\r\n                                    <Link className=\"login-link\" to=\"/register\">Don't have an account? Sign Up</Link>\r\n                                </div>\r\n                                }\r\n                            </div> \r\n                            <br/>\r\n                            {\r\n                                show_facebook_btn && \r\n                                <FacebookLoginComponent {...this.props} />\r\n                            }                                             \r\n                        </form>\r\n                    </div>\r\n                    \r\n                    {Text1&&<p className=\"terms-and-conditions\">{Text1}</p>}\r\n\r\n\r\n                    {this.renderCard()} \r\n\r\n                    <OTPValidator data={this.state.otpValidator} \r\n                        onOTPValidatorClose={this.onOTPValidatorClose} /> \r\n                    {this.renderLoader()}                  \r\n                    {this.renderFooter()}\r\n                </div>\r\n            </main>            \r\n            }\t\t\r\n        </div>\r\n        );\r\n    }  \r\n\r\n    renderFooter() {\r\n        return (\r\n            <div className=\"MuiGrid-grid-xs-12 MuiGrid-grid-sm-8 MuiGrid-grid-md-5 powered-by-container\">\r\n                {this.state.connectionErrorMsg && <div class=\"off-line\">{this.state.connectionErrorMsg}</div>}\r\n                <div className=\"powered-by\">\r\n                    <p className=\"powered-by-text text-alignCenter\">\r\n                        Copyright © &nbsp;\r\n                        <a className=\"login-link\" href=\"https://conceptwaves.com/\">\r\n                            <img src={cw_logo} alt=\"logo\" />\r\n                        </a> 2022.\r\n                    </p>                \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderLoader() {\r\n        const _loadingText = 'Please wait...';\r\n        return (\r\n            <ILoader\r\n                loadingText={_loadingText}\r\n                isShow={this.state.loading}\r\n                loaderStyle={this.state.loaderStyle}\r\n                >\r\n            </ILoader>\r\n        )\r\n    }\r\n\r\n    renderCard() {\r\n        let data = this.state.info;\r\n          return  <div className=\"hashbg home-card\"> \r\n          {\r\n               data?.cards && data?.cards?.map((item, index) => {\r\n                      return ( \r\n                <Button key={index} variant=\"primary login button-full ilearn-white-btn button-md\" onClick={() =>this.routeInstituteCard(item)}>\r\n                  <img src={Config.logo} alt={item.name} /> {item.name}\r\n                </Button>\r\n                      )\r\n                })\r\n      }\r\n      </div>\r\n    }\r\n\r\n    routeInstituteCard = (card) => {\r\n        //console.log(JSON.stringify(card));\r\n        this.props.history.push({\r\n          pathname: '/instituteCardDetail',\r\n          state: { card: card }});\r\n      };\r\n\r\n    updateInput = (e) =>{\r\n        let v = e.target.value;\r\n        let k = e.target.name;\r\n        let loginDetails = {...this.state.loginDetails}\r\n        loginDetails[k] = v;\r\n        this.setState({loginDetails});\r\n    }\r\n    \r\n    handleKeypress = e => {\r\n        console.log(\"key : \"+e.charCode );\r\n        if (e.charCode  === 13) {\r\n            this.login();\r\n        }\r\n    };\r\n\r\n    login() {\r\n        let { loginDetails} = this.state;\r\n        if (loginDetails.username && loginDetails.password) {\r\n          this.setState({ loading: true, connectionErrorMsg:null }, () => {\r\n            ApiService.fetchLogin(loginDetails.username, loginDetails.password)\r\n            .then((res) => {\r\n                if(res.data.status===1) { \r\n                    this.setState({ loading: false, loginUserData: res.data.data }, () => {\r\n                        this.dologin();\r\n                    }); \r\n                }\r\n                else {\r\n                    this.setState({\r\n                        loading: false,\r\n                        errorMessage : res.data.message\r\n                    });  \r\n                }\r\n            },\r\n            error => { //ErrorCB\r\n                this.setState({loading:false, \r\n                connectionErrorMsg: Config.CONNECTION_ERROR_MSG});\r\n            });\r\n          });\r\n        }\r\n    }\r\n\r\n    loginToken(token) {\r\n        if (token) {\r\n            console.log('here');\r\n          if(Config.siteTitle === 'unsat' || Config.siteTitle === 'unsat2') this.dologin(token);\r\n          this.setState({ loading: true, loaderStyle:'dark', connectionErrorMsg:null }, () => {\r\n            ApiService.fetchLoginToken(token)\r\n            .then((res) => {\r\n                if(res.data.status===1) { \r\n                    this.setState({ loading: false, loginUserData: res.data.data }, () => {\r\n                        this.dologin();\r\n                    }); \r\n                }\r\n                else {\r\n                    this.setState({\r\n                        loading: false,\r\n                        errorMessage : res.data.message\r\n                    });  \r\n                }\r\n            },\r\n            error => { //ErrorCB\r\n                this.setState({loading:false, \r\n                connectionErrorMsg: Config.CONNECTION_ERROR_MSG});\r\n            });\r\n          });\r\n        }\r\n    }\r\n\r\n    dologin(reqToken = null) {\r\n        console.log('here');\r\n        let loginUserData = this.state.loginUserData;\r\n        var decoded = jwt_decode(loginUserData?.token || reqToken);\r\n        if(reqToken) decoded['token'] = reqToken;\r\n        let paramsString = this.props.location.search;\r\n        const params = new URLSearchParams(paramsString);\r\n        let token =  params.get('token');\r\n        let testId =  params.get('testId');\r\n        let target =  params.get('target')\r\n        if(token || testId){\r\n            localStorage.setItem('user', JSON.stringify(loginUserData || decoded));\r\n            localStorage.setItem('enquiryId', loginUserData?.enquiryId || decoded?.enquiryId);\r\n            localStorage.setItem('tenant', decoded.tenant);\r\n            if(testId){\r\n                this.props.history.push('/TestInstructions/'+testId+'?cat=0');\r\n            }else if(target){\r\n                this.props.history.push('/'+target);\r\n            }else {\r\n                this.props.history.push('/');\r\n            }\r\n        }else if(loginUserData.otpEnableStatus && loginUserData.otpEnableStatus===1) {\r\n            let _otpValidator = { show:true, \r\n                otpLength: loginUserData.otpLength, \r\n                smsAddress: loginUserData.smsAddress,\r\n                message: loginUserData.otpMessage,\r\n                userId: loginUserData.userId\r\n            }\r\n            this.setState({ otpValidator: _otpValidator });   \r\n        }else {\r\n            \r\n            localStorage.setItem('user', JSON.stringify(loginUserData));\r\n            localStorage.setItem('enquiryId', loginUserData.enquiryId);\r\n            localStorage.setItem('tenant', decoded.tenant);\r\n            //localStorage.setItem('user', JSON.stringify(loginUserData));\r\n            //localStorage.setItem('user', JSON.stringify(loginUserData));\r\n            this.props.history.push('/');\r\n        }\r\n    }\r\n\r\n    onOTPValidatorClose = value => {\r\n        if(value===true) {\r\n            var loginUserData = this.state.loginUserData;\r\n            var decoded = jwt_decode(loginUserData.token);\r\n            localStorage.setItem('user', JSON.stringify(this.state.loginUserData));\r\n            localStorage.setItem('tenant', decoded.tenant);\r\n            this.props.history.push('/');\r\n        }\r\n        else {\r\n            let _otpValidator= { show:false, \r\n                otp: null, \r\n                smsAddress: null, \r\n                message:'Successfully sent the One Time Password to your Registered Mobile Number',\r\n                userId: null\r\n            }\r\n            this.setState({ otpValidator: _otpValidator }); \r\n        }      \r\n    }\r\n\r\n  \r\n}\r\n\r\nexport default DesktopHome;"]},"metadata":{},"sourceType":"module"}