{"ast":null,"code":"var _jsxFileName = \"S:\\\\REACT\\\\Ract-Js\\\\Frlnce\\\\src\\\\pages\\\\test\\\\TestTaking.js\";\nimport React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport Timer from \"../../_components/timer/timer\";\nimport Button from 'react-bootstrap/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport ApiService from \"../../_services/ApiService\";\nimport { faEye, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\nimport './Test.css';\nimport Loader from './../../_components/loader/loader';\nimport Utils from \"../../_helpers/utils\";\n\nclass TestTaking extends Component {\n  constructor(props) {\n    super(props);\n\n    this.startTimer = () => {\n      /* this.timer = setInterval(() => this.setState({\r\n        questime: this.state.questime + 1\r\n       }), 1000)\r\n       console.log(\"start\");*/\n    };\n\n    this.resetTimer = () => {\n      this.setState({\n        questime: 0\n      });\n      console.log(\"reset\");\n    };\n\n    this.goBack = () => {\n      let paramsString = this.props.location.search;\n      const params = new URLSearchParams(paramsString);\n      let lms = params.get('lms');\n      let title = params.get('title');\n\n      if (lms == 1) {\n        this.props.history.replace('/lesson/steps/attachments/' + this.props.match.params.pid + '/' + title + '?back=quiz');\n      } else {\n        this.props.history.replace('/TestList/' + this.props.match.params.pid);\n      }\n    };\n\n    this.EndExamAlert = () => {\n      swal({\n        title: \"CONFIRM\",\n        text: \"Are you sure you want to submit the Test?\",\n        buttons: ['No', 'Yes'],\n        dangerMode: true\n      }).then(endExam => {\n        if (endExam) {\n          this.EndExam();\n        }\n      });\n    };\n\n    this.closeExamAlert = () => {\n      swal({\n        title: \"CONFIRM\",\n        text: \"Are you sure you want to quit the Test?\",\n        buttons: ['No', 'Yes'],\n        dangerMode: true\n      }).then(exitExam => {\n        if (exitExam) {\n          clearInterval(this.state.intervalId);\n          var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n          var i = this.state.index;\n          testObject[i].resume = 1;\n          testObject[i].resumeTime = localStorage.getItem('time_left');\n          testObject[i].resumeQuestion = this.state.question_num;\n          localStorage.setItem(\"tests\", JSON.stringify(testObject));\n          this.goBack();\n        }\n      });\n    };\n\n    this.EndExam = () => {\n      clearInterval(this.state.intervalId);\n      var online = navigator.onLine;\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n      var i = this.state.index;\n      var studentPdfResponse = testObject[i].studentPdfResponse;\n      var test_id = testObject[i].id; //online = false;\n\n      if (online == true) {\n        var question_array = [];\n\n        for (var j = 0; j < testObject[i].questions.length; j++) {\n          var answers = '';\n          var marks = '';\n          let category = testObject[i].questions[j].questionCategory;\n\n          if (category == 1 || category == 26) {\n            for (var k = 0; k < testObject[i].questions[j].choices.length; k++) {\n              if (testObject[i].questions[j].choices[k].checked == 1) {\n                answers += testObject[i].questions[j].choices[k].id + ',';\n\n                if (testObject[i].questions[j].choices[k].correct == true) {\n                  marks = testObject[i].questions[j].marks;\n                } else {\n                  marks = \"-\" + testObject[i].questions[j].negativeMarks;\n                }\n              }\n            }\n\n            if (answers) {\n              answers = answers.replace(/,(?=\\s*$)/, '');\n            }\n\n            question_array.push({\n              questionId: \"\" + testObject[i].questions[j].id + \"\",\n              answers: \"\" + answers + \"\",\n              qnType: \"mcq\",\n              marks: \"\" + marks + \"\",\n              timeTaken: \"\" + testObject[i].questions[j].question_time * 1000 + \"\"\n            });\n          } else if (category == 4 || category == 7 || category == 0 || category == 5) {\n            //alert(testObject[i].questions[j].answered);\n            if (testObject[i].questions[j].answered == undefined) {\n              testObject[i].questions[j].answered = '';\n            } //alert(testObject[i].questions[j].answered);\n\n\n            question_array.push({\n              questionId: \"\" + testObject[i].questions[j].id + \"\",\n              answers: \"\" + testObject[i].questions[j].answered + \"\",\n              qnType: \"textAnswer\",\n              marks: \"\" + marks + \"\",\n              timeTaken: \"\" + testObject[i].questions[j].question_time * 1000 + \"\"\n            });\n          } else if (category == 2) {\n            var questionId = testObject[i].questions[j].id;\n            var arr = testObject[i].questions[j].answered;\n            var answered = {};\n\n            if (arr != undefined) {\n              for (var c = 0; c < arr.length; c++) {\n                var cur = arr[c];\n                var choice = cur.split(\":\")[0];\n                var match = cur.split(\":\")[1];\n\n                if (answered[choice]) {\n                  var matches = answered[choice];\n                  matches.push(match);\n                  answered[choice] = matches;\n                } else {\n                  var matches = [];\n                  matches.push(match);\n                  answered[choice] = matches;\n                }\n              }\n            }\n\n            var answers = Object.keys(answered);\n            var attemptedAnswer = \"\";\n\n            for (var d = 0; d < answers.length; d++) {\n              var choice = answers[d];\n              attemptedAnswer += choice + \":\";\n\n              for (var e = 0; e < answered[choice].length; e++) {\n                attemptedAnswer += answered[choice][e] + \";\";\n              }\n\n              attemptedAnswer = attemptedAnswer.slice(0, attemptedAnswer.length - 1);\n              attemptedAnswer += \",\";\n            }\n\n            attemptedAnswer = attemptedAnswer.slice(0, attemptedAnswer.length - 1);\n            question_array.push({\n              questionId: \"\" + questionId + \"\",\n              answers: \"\" + attemptedAnswer + \"\",\n              qnType: \"mcq\",\n              marks: \"5\",\n              timeTaken: \"\" + testObject[i].questions[j].question_time * 1000 + \"\"\n            });\n          }\n        }\n\n        let user = JSON.parse(localStorage.getItem('user')) || [];\n\n        if (!user.userName) {\n          user.userName = \"\";\n          user.enquiryId = localStorage.getItem('enquiryId');\n        }\n\n        var tempDate = new Date();\n        var date = tempDate.getFullYear() + '-' + (tempDate.getMonth() + 1) + '-' + tempDate.getDate() + ' ' + tempDate.getHours() + ':' + tempDate.getMinutes() + ':' + tempDate.getSeconds();\n        var json_data = {\n          \"info\": {\n            \"studentCode\": \"\" + user.userName + \"\",\n            \"enquiryId\": \"\" + user.enquiryId + \"\",\n            \"testId\": \"\" + testObject[i].id + \"\",\n            \"testPaperId\": \"0\",\n            \"startDate\": \"\" + date + \"\",\n            \"timeTaken\": \"\" + this.state.testTime + \"\"\n          },\n          \"attempts\": question_array\n        };\n        this.setState({\n          loading: true\n        }, () => {\n          ApiService.endExam(json_data).then(res => {\n            if (res.data.status == 1) {\n              for (var i = 0; i < testObject.length; i++) {\n                if (testObject[i].id == this.props.match.params.id) {\n                  testObject.splice(i, 1); //remove item from array\n                }\n              }\n\n              localStorage.setItem(\"tests\", JSON.stringify(testObject));\n              this.setState({\n                loading: false\n              });\n\n              if (studentPdfResponse == false) {\n                this.goBack();\n              } else {\n                this.props.history.push({\n                  pathname: \"/test/upload/\" + test_id,\n                  state: {\n                    testEndTime: 0\n                  }\n                });\n              }\n            } else {\n              swal({\n                title: \"Alert\",\n                text: \"Could not Connect to Server. Please check your Internet connection and try again Later.\",\n                dangerMode: true\n              });\n            }\n          });\n        });\n      } else {\n        testObject[i].submit = 1;\n        localStorage.setItem(\"tests\", JSON.stringify(testObject));\n        this.goBack();\n      }\n    };\n\n    this.handleKeyUp = event => {\n      var answer = event.target.value;\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n      var mark = 0;\n      var i = this.state.index;\n\n      for (var j = 0; j < testObject[i].questions.length; j++) {\n        let category = testObject[i].questions[j].questionCategory;\n\n        if (this.state.question_num + 1 === testObject[i].questions[j].questionNumber) {\n          //look for match with id\n          if (category == 4 || category == 7 || category == 0 || category == 5) {\n            if (answer) {\n              testObject[i].questions[j].answered = answer;\n              testObject[i].questions[j].class = \"answered\";\n              this.setState({\n                boxClass: \"answered\"\n              });\n            } else {\n              testObject[i].questions[j].answered = '';\n              testObject[i].questions[j].class = \"notanswered\";\n              this.setState({\n                boxClass: \"notanswered\"\n              });\n            }\n\n            if (testObject[i].questions[j].mark) {\n              mark = 1;\n            }\n          }\n        }\n      }\n\n      localStorage.setItem(\"tests\", JSON.stringify(testObject));\n\n      if (mark == 1) {\n        this.MarkQuestion();\n      }\n\n      this.reloadQuestionList();\n    };\n\n    this.NextQuestion = () => {\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n      var checked = 0;\n      var category = testObject[this.state.index].questions[this.state.question_num].questionCategory;\n\n      if (this.state.question_num < testObject[this.state.index].questions.length - 1) {\n        if (category == 1 || category == 26) {\n          for (var c = 0; c < testObject[this.state.index].questions[this.state.question_num].choices.length; c++) {\n            if (testObject[this.state.index].questions[this.state.question_num].choices[c].checked == 1) {\n              checked = 1;\n            }\n          }\n        } else if (category == 4 || category == 7 || category == 0 || category == 5) {\n          if (testObject[this.state.index].questions[this.state.question_num].answered) {\n            checked = 1;\n          }\n        } else if (category == 2) {\n          var answered_array = testObject[this.state.index].questions[this.state.question_num].answered || [];\n\n          if (answered_array.length) {\n            checked = 1;\n          }\n        }\n\n        if (checked == 0) {\n          testObject[this.state.index].questions[this.state.question_num].class = \"notanswered\";\n          this.setState({\n            boxClass: \"notanswered\"\n          });\n          this.setState({\n            addClass: true\n          });\n        }\n\n        if (!localStorage.getItem('prevTime')) {\n          localStorage.setItem('prevTime', testObject[this.state.index].testTime * 60);\n        }\n\n        if (!testObject[this.state.index].questions[this.state.question_num].question_time) {\n          //alert(localStorage.getItem('prevTime') - localStorage.getItem('time_left'));\n          testObject[this.state.index].questions[this.state.question_num].question_time = localStorage.getItem('prevTime') - localStorage.getItem('time_left');\n        } else {\n          var ques_time = testObject[this.state.index].questions[this.state.question_num].question_time;\n          testObject[this.state.index].questions[this.state.question_num].question_time = parseInt(ques_time) + parseInt(localStorage.getItem('prevTime')) - parseInt(localStorage.getItem('time_left'));\n        }\n\n        localStorage.setItem('prevTime', localStorage.getItem('time_left'));\n        this.setState({\n          question_num: this.state.question_num + 1\n        });\n        testObject[this.state.index].resumeQuestion = this.state.question_num + 1;\n      }\n\n      localStorage.setItem(\"tests\", JSON.stringify(testObject));\n      this.reloadQuestionList();\n      this.renderQuestions();\n      this.resetTimer();\n      this.startTimer();\n    };\n\n    this.MarkQuestion = () => {\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n      var checked = 0;\n      var category = testObject[this.state.index].questions[this.state.question_num].questionCategory;\n\n      if (category == 1 || category == 26) {\n        for (var c = 0; c < testObject[this.state.index].questions[this.state.question_num].choices.length; c++) {\n          if (testObject[this.state.index].questions[this.state.question_num].choices[c].checked == 1) {\n            checked = 1;\n          }\n        }\n      } else if (category == 4 || category == 7 || category == 0 || category == 5) {\n        if (testObject[this.state.index].questions[this.state.question_num].answered) {\n          checked = 1;\n        }\n      } else if (category == 2) {\n        var answered_array = testObject[this.state.index].questions[this.state.question_num].answered || [];\n\n        if (answered_array.length == 0) {\n          checked = 1;\n        }\n      }\n\n      if (checked == 0) {\n        testObject[this.state.index].questions[this.state.question_num].mark = \"marked\";\n        this.setState({\n          boxClass: \"marked\"\n        });\n        this.setState({\n          addClass: true\n        });\n      } else {\n        testObject[this.state.index].questions[this.state.question_num].mark = \"markedanswered\";\n        this.setState({\n          boxClass: \"markedanswered\"\n        });\n        this.setState({\n          addClass: true\n        });\n      }\n\n      localStorage.setItem(\"tests\", JSON.stringify(testObject));\n      this.reloadQuestionList();\n    };\n\n    this.UNMarkQuestion = () => {\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n      var checked = 0;\n      var category = testObject[this.state.index].questions[this.state.question_num].questionCategory;\n\n      if (category == 1 || category == 26) {\n        for (var c = 0; c < testObject[this.state.index].questions[this.state.question_num].choices.length; c++) {\n          if (testObject[this.state.index].questions[this.state.question_num].choices[c].checked == 1) {\n            checked = 1;\n          }\n        }\n      } else if (category == 4 || category == 7 || category == 0 || category == 5) {\n        if (testObject[this.state.index].questions[this.state.question_num].answered) {\n          checked = 1;\n        }\n      } else if (category == 2) {\n        var answered_array = testObject[this.state.index].questions[this.state.question_num].answered || [];\n\n        if (answered_array.length == 0) {\n          checked = 1;\n        }\n      }\n\n      if (checked == 0) {\n        testObject[this.state.index].questions[this.state.question_num].mark = \"\";\n        this.setState({\n          boxClass: \"\"\n        });\n        this.setState({\n          addClass: true\n        });\n      } else {\n        testObject[this.state.index].questions[this.state.question_num].mark = \"\";\n        this.setState({\n          boxClass: \"\"\n        });\n        this.setState({\n          addClass: true\n        });\n      }\n\n      localStorage.setItem(\"tests\", JSON.stringify(testObject));\n      this.reloadQuestionList();\n    };\n\n    this.PrevQuestion = () => {\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n\n      if (this.state.question_num >= 1) {\n        this.setState({\n          question_num: this.state.question_num - 1\n        });\n        testObject[this.state.index].resumeQuestion = this.state.question_num - 1;\n\n        if (!localStorage.getItem('prevTime')) {\n          localStorage.setItem('prevTime', testObject[this.state.index].testTime * 60);\n        }\n\n        if (!testObject[this.state.index].questions[this.state.question_num].question_time) {\n          testObject[this.state.index].questions[this.state.question_num].question_time = localStorage.getItem('prevTime') - localStorage.getItem('time_left');\n        } else {\n          var ques_time = testObject[this.state.index].questions[this.state.question_num].question_time;\n          testObject[this.state.index].questions[this.state.question_num].question_time = parseInt(ques_time) + parseInt(localStorage.getItem('prevTime')) - parseInt(localStorage.getItem('time_left'));\n        }\n\n        localStorage.setItem('prevTime', localStorage.getItem('time_left'));\n      }\n\n      localStorage.setItem(\"tests\", JSON.stringify(testObject));\n    };\n\n    this.state = {\n      questions: [],\n      message: null,\n      question_num: 0,\n      boxClass: ['notvisited'],\n      addClass: false,\n      mark: false,\n      checked: false,\n      tests: [],\n      math: '',\n      questime: 0,\n      loading: false,\n      networkError: 0,\n      prevTime: 0\n    };\n    this.node = /*#__PURE__*/React.createRef();\n    this.reloadQuestionList = this.reloadQuestionList.bind(this); //this.startTimer = this.startTimer.bind(this);\n    //this.resetTimer = this.resetTimer.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadQuestionList();\n    this.startTimer();\n\n    if (window.MathJax !== undefined) {\n      window.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, this.node.current]);\n    }\n\n    window.addEventListener('load', function () {\n      window.history.pushState({}, '');\n    });\n    let paramsString = this.props.location.search;\n    const params = new URLSearchParams(paramsString);\n    let lms = params.get('lms');\n    let title = params.get('title');\n    /*window.addEventListener(\"visibilitychange\", function() {\r\n    \tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n    \tvar i = localStorage.getItem('test_id');\r\n    \tvar catid = localStorage.getItem('test_catid');\r\n    \ttestObject[i].resume=1;\r\n    \ttestObject[i].resumeTime = localStorage.getItem('time_left');\r\n    \tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n    \tif(lms==1){\r\n    \t  window.history.pushState(null, null, '/lesson/steps/attachments/'+catid+'/'+title+'?back=quiz');\r\n    \t}else{\r\n    \t  window.history.pushState(null, null, '/TestList/'+catid);\r\n    \t}\r\n    \twindow.location.reload();\r\n    });*/\n\n    window.onbeforeunload = function () {\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n      var i = localStorage.getItem('test_id');\n      testObject[i].resume = 1;\n      testObject[i].resumeTime = localStorage.getItem('time_left');\n      localStorage.setItem(\"tests\", JSON.stringify(testObject));\n    };\n\n    window.addEventListener('popstate', function () {\n      window.history.pushState({}, ''); //this.closeExamAlert();\n      //document.getElementById(\"testclose\").click();\n\n      var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n\n      if (typeof testObject !== 'undefined' && testObject.length > 0) {\n        var i = localStorage.getItem('test_id');\n        var catid = localStorage.getItem('test_catid');\n\n        if (lms == 1 && i) {\n          testObject[i].resume = 1;\n          testObject[i].resumeTime = localStorage.getItem('time_left');\n          localStorage.setItem(\"tests\", JSON.stringify(testObject));\n          window.history.pushState(null, null, '/lesson/steps/attachments/' + catid + '/' + title + '?back=quiz');\n        } else if (i) {\n          testObject[i].resume = 1;\n          testObject[i].resumeTime = localStorage.getItem('time_left');\n          localStorage.setItem(\"tests\", JSON.stringify(testObject));\n          window.history.pushState(null, null, '/TestList/' + catid);\n        } else {\n          window.history.pushState(null, null, '/TestList/' + catid);\n        }\n\n        window.location.reload();\n      } else {\n        var catid = localStorage.getItem('test_catid');\n\n        if (lms == 1) {\n          window.history.pushState(null, null, '/lesson/steps/attachments/' + catid + '/' + title + '?back=quiz');\n        } else {\n          window.history.pushState(null, null, '/TestList/' + catid);\n        }\n\n        window.location.reload();\n      }\n      /*swal({\r\n      title: \"CONFIRM\",\r\n      text: \"Are you sure you want to quit the Test?\",\r\n      buttons: ['No','Yes'],\r\n      dangerMode: true,\r\n      })\r\n      .then(exitExam => {\r\n      if (exitExam) {\r\n      \twindow.location.reload();\r\n      }\r\n        });*/\n\n    });\n    this.testActive();\n    var intervalId = setInterval(() => this.testActive(), 60000);\n    this.setState({\n      intervalId: intervalId\n    });\n    let testid = this.props.match.params.id;\n    this.initTestTaking(testid);\n  }\n\n  componentDidUpdate() {\n    if (window.MathJax !== undefined) {\n      window.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, this.node.current]);\n    } //this.startTimer();\n\n  }\n\n  async testActive() {\n    let testid = this.props.match.params.id;\n    ApiService.testisActive(testid).then(res => {\n      if (res.data.isActive == false) {\n        document.getElementById(\"endExam\").click();\n      }\n    }).catch(error => {\n      if (this.state.networkError == 2) {\n        clearInterval(this.state.intervalId);\n        var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n\n        if (typeof testObject !== 'undefined' && testObject.length > 0) {\n          var i = localStorage.getItem('test_id');\n          var catid = localStorage.getItem('test_catid');\n          testObject[i].resume = 1;\n          testObject[i].resumeTime = localStorage.getItem('time_left');\n          localStorage.setItem(\"tests\", JSON.stringify(testObject));\n          window.history.pushState(null, null, '/TestList/' + catid);\n        }\n\n        swal({\n          title: \"Alert\",\n          text: \"Could not Connect to Server. Please check your Internet connection and try again Later.\",\n          dangerMode: true\n        }).then(endExam => {\n          if (endExam) {\n            this.goBack();\n          }\n        });\n      } else {\n        this.setState({\n          networkError: this.state.networkError + 1\n        });\n      }\n    });\n  }\n\n  reloadQuestionList() {\n    var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n\n    for (var i = 0; i < testObject.length; i++) {\n      if (testObject[i].id == this.props.match.params.id) {\n        this.setState({\n          index: i\n        });\n        this.setState({\n          testId: testObject[i].id\n        });\n        this.setState({\n          questions: testObject[i].questions\n        });\n        this.setState({\n          testName: testObject[i].name\n        });\n\n        if (testObject[i].resumeTime) {\n          this.setState({\n            testTime: parseInt(testObject[i].resumeTime)\n          });\n        } else {\n          this.setState({\n            testTime: parseInt(testObject[i].testTime) * 60\n          });\n        }\n\n        if (testObject[i].resumeQuestion) {\n          this.setState({\n            question_num: parseInt(testObject[i].resumeQuestion)\n          });\n        }\n\n        this.setState({\n          totalMarks: testObject[i].totalMarks\n        });\n        this.setState({\n          noOfQuestions: testObject[i].noOfQuestions\n        });\n        localStorage.setItem('test_id', i);\n        localStorage.setItem('test_catid', this.props.match.params.pid);\n      }\n    }\n  }\n\n  initTestTaking(testId) {\n    this.setState({\n      loading: true\n    }, () => {\n      ApiService.initTestTaking(testId).then(res => {\n        this.setState({\n          loading: false\n        });\n      });\n    });\n  }\n\n  getCheckeboxValue(event) {\n    const choice = event.target.value;\n    const status = event.target.checked;\n    var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n    var checked = 0;\n    var mark = 0;\n    var i = this.state.index;\n\n    for (var j = 0; j < testObject[i].questions.length; j++) {\n      if (this.state.question_num + 1 === testObject[i].questions[j].questionNumber) {\n        //look for match with id\n        let category = testObject[i].questions[j].questionCategory;\n\n        if (category == 1 || category == 26) {\n          for (var k = 0; k < testObject[i].questions[j].choices.length; k++) {\n            if (choice == testObject[i].questions[j].choices[k].id && category == 1) {\n              if (status) {\n                testObject[i].questions[j].choices[k].checked = 1;\n                testObject[i].questions[j].class = \"answered\";\n                this.setState({\n                  boxClass: \"answered\"\n                });\n              } else {\n                testObject[i].questions[j].choices[k].checked = 0;\n                testObject[i].questions[j].class = \"notanswered\";\n                this.setState({\n                  boxClass: \"notanswered\"\n                });\n              }\n\n              this.setState({\n                addClass: true\n              });\n\n              if (testObject[i].questions[j].mark) {\n                mark = 1;\n              }\n\n              break; //exit loop since you found the choice\n            } else if (category == 26) {\n              var singleOpt = document.getElementById(\"single_opt\");\n              var chks = singleOpt.getElementsByTagName(\"INPUT\");\n\n              for (var c = 0; c < chks.length; c++) {\n                chks[c].onclick = function () {\n                  for (var c = 0; c < chks.length; c++) {\n                    if (chks[c] != this && this.checked) {\n                      chks[c].checked = false;\n                    }\n                  }\n                };\n              }\n\n              if (choice == testObject[i].questions[j].choices[k].id && status) {\n                testObject[i].questions[j].choices[k].checked = 1;\n                testObject[i].questions[j].class = \"answered\";\n                this.setState({\n                  boxClass: \"answered\"\n                });\n                checked = 1;\n              } else {\n                testObject[i].questions[j].choices[k].checked = 0;\n                testObject[i].questions[j].class = \"notanswered\";\n                this.setState({\n                  boxClass: \"notanswered\"\n                });\n              }\n\n              this.setState({\n                addClass: true\n              });\n\n              if (testObject[i].questions[j].mark) {\n                mark = 1;\n              }\n            }\n          }\n        } else if (category == 2) {\n          var answered_array = testObject[i].questions[j].answered || [];\n\n          if (status) {\n            if (!answered_array.includes(choice)) {\n              answered_array.push(choice);\n              testObject[i].questions[j].answered = answered_array;\n              testObject[i].questions[j].class = \"answered\";\n              this.setState({\n                boxClass: \"answered\"\n              });\n              checked = 1;\n              console.log(\"answered\");\n            }\n          } else {\n            for (var i = 0; i < answered_array.length; i++) {\n              //loop over the collection\n              if (answered_array[i] == choice) {\n                //see if choice match\n                answered_array.splice(i, 1); //remove item from array\n\n                break; //exit loop\n              }\n            }\n          }\n\n          if (answered_array.length == 0) {\n            testObject[i].questions[j].class = \"notanswered\";\n            this.setState({\n              boxClass: \"notanswered\"\n            });\n            console.log(\"notanswered\");\n          }\n        }\n\n        if (checked == 1) {\n          testObject[i].questions[j].class = \"answered\";\n          this.setState({\n            boxClass: \"answered\"\n          });\n        } //if(testObject[i].questions[j].mark){ mark = 1; }\n\n\n        break;\n      }\n    }\n\n    localStorage.setItem(\"tests\", JSON.stringify(testObject));\n\n    if (mark == 1) {\n      this.MarkQuestion();\n    }\n\n    this.reloadQuestionList();\n  }\n\n  prevDisabled() {\n    if (this.state.question_num === 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  nextDisabled() {\n    let question = this.state.questions;\n\n    if (this.state.question_num < question.length - 1) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  openNav() {\n    let isMobile = Utils.isMobileDevice();\n\n    if (isMobile === true) {\n      document.getElementById(\"QuestionsSidenav\").style.width = \"100%\";\n    } else {\n      document.getElementById(\"QuestionsSidenav\").style.width = \"30%\";\n      document.getElementById(\"sidenavclose\").style.right = \"71%\";\n    }\n  }\n\n  closeNav() {\n    document.getElementById(\"QuestionsSidenav\").style.width = \"0\";\n  }\n\n  showQuestion(e, id) {\n    e.preventDefault();\n    this.setState({\n      question_num: id\n    });\n    var testObject = JSON.parse(localStorage.getItem('tests')) || [];\n    testObject[this.state.index].resumeQuestion = id;\n    localStorage.setItem(\"tests\", JSON.stringify(testObject));\n    document.getElementById(\"QuestionsSidenav\").style.width = \"0\";\n  }\n\n  currentTime(time) {\n    //alert(time);\n    this.setState({\n      currentTimeSeconds: time\n    });\n  }\n\n  render() {\n    let portlet = JSON.parse(localStorage.getItem('portlet')) || [];\n    const {\n      loading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 714,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `test-header ${portlet.class ? portlet.class : 'orange-card'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"testclose\",\n      id: \"testclose\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTimesCircle,\n      id: \"closeAlert\",\n      onClick: this.closeExamAlert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 5\n      }\n    }, this.state.testName), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"timer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 720,\n        columnNumber: 5\n      }\n    }, this.state.testTime > 0 && /*#__PURE__*/React.createElement(Timer, {\n      startTimeInSeconds: parseInt(this.state.testTime),\n      currentTime: this.currentTime.bind(this),\n      EndExam: this.EndExam.bind(this),\n      type: \"mobile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 6\n      }\n    }))), this.renderSidePanel(), loading ? /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 17\n      }\n    }) : this.renderQuestions());\n  }\n\n  renderSidePanel() {\n    let portlet = JSON.parse(localStorage.getItem('portlet')) || [];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"QuestionsSidenav\",\n      className: \"QuestionsSidenav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 735,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `test-header ${portlet.class ? portlet.class : 'orange-card'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 737,\n        columnNumber: 8\n      }\n    }, \"Review\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidenavclose\",\n      id: \"sidenavclose\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTimesCircle,\n      onClick: this.closeNav,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"questionspanelno\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 11\n      }\n    }, \"Tap on the Question no. you want to review \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"questionstatus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"answered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 9\n      }\n    }, \"Answered\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"marked\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 9\n      }\n    }, \"Marked\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"markedanswered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 747,\n        columnNumber: 9\n      }\n    }, \"Marked & Answered\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"notanswered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 748,\n        columnNumber: 9\n      }\n    }, \"Not Answered\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"notvisited\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 749,\n        columnNumber: 9\n      }\n    }, \"Not Visited\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"questionsnumbers\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 10\n      }\n    }, this.renderSidePanelNumbers())));\n  }\n\n  renderSidePanelNumbers() {\n    let list = [];\n    let question = this.state.questions; //console.log(question);\n\n    for (let i = 0; i < question.length; i++) {\n      if (question[i].mark) {\n        list.push( /*#__PURE__*/React.createElement(Button, {\n          onClick: e => this.showQuestion(e, i),\n          className: question[i].mark,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 16\n          }\n        }, i + 1, \" \"));\n      } else if (question[i].class) {\n        list.push( /*#__PURE__*/React.createElement(Button, {\n          onClick: e => this.showQuestion(e, i),\n          className: question[i].class,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 15\n          }\n        }, i + 1, \" \"));\n      } else {\n        list.push( /*#__PURE__*/React.createElement(Button, {\n          onClick: e => this.showQuestion(e, i),\n          className: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 770,\n            columnNumber: 16\n          }\n        }, i + 1, \" \"));\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"questions-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 10\n      }\n    }, list);\n  }\n\n  renderQuestions() {\n    let button = null;\n    let text = \"\";\n    let type = \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"questions_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 11\n      }\n    }, this.state.questions.map((item, index) => {\n      if (index === this.state.question_num) {\n        let category = this.state.questions[index].questionCategory;\n\n        if (this.state.questions[index].mark === \"markedanswered\" || this.state.questions[index].mark === \"marked\") {\n          button = /*#__PURE__*/React.createElement(Button, {\n            variant: \"danger\",\n            onClick: this.UNMarkQuestion,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 14\n            }\n          }, \"UNMARK\");\n        } else {\n          button = /*#__PURE__*/React.createElement(Button, {\n            variant: \"primary\",\n            onClick: this.MarkQuestion,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 14\n            }\n          }, \"MARK\");\n        }\n\n        if (category == 1) {\n          type = \"multiple_opt\";\n        } else if (category == 26) {\n          type = \"single_opt\";\n        } else if (category == 4 || category == 7 || category == 5) {\n          type = \"num_opt\";\n\n          if (this.state.questions[index].answered) {\n            text = /*#__PURE__*/React.createElement(\"input\", {\n              type: \"number\",\n              name: \"numberic\",\n              defaultValue: this.state.questions[index].answered,\n              onKeyUp: this.handleKeyUp,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 798,\n                columnNumber: 28\n              }\n            });\n          } else {\n            text = /*#__PURE__*/React.createElement(\"input\", {\n              type: \"number\",\n              name: \"numberic\",\n              defaultValue: \"\",\n              onKeyUp: this.handleKeyUp,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 13\n              }\n            });\n          }\n        } else if (category == 0) {\n          type = \"num_opt\";\n          this.state.questions[index].choices = [];\n\n          if (this.state.questions[index].answered) {\n            text = /*#__PURE__*/React.createElement(\"textarea\", {\n              name: \"numberic\",\n              defaultValue: this.state.questions[index].answered,\n              onKeyUp: this.handleKeyUp,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 806,\n                columnNumber: 28\n              }\n            });\n          } else {\n            text = /*#__PURE__*/React.createElement(\"textarea\", {\n              name: \"numberic\",\n              defaultValue: \"\",\n              onKeyUp: this.handleKeyUp,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 13\n              }\n            });\n          }\n        } else if (category == 2) {\n          let list = [];\n          let opt = [];\n          let match = [];\n          let aplpha = ['A', 'B', 'C', 'D', 'E', 'F'];\n          let aplpha2 = ['P', 'Q', 'R', 'S', 'T', 'U'];\n          var choices = this.state.questions[index].choices;\n          var matches = this.state.questions[index].matches;\n          var answered = this.state.questions[index].answered || [];\n          var match_div = \"\";\n          var match_opt = \"\";\n\n          for (let i = 0; i < choices.length; i++) {\n            list.push( /*#__PURE__*/React.createElement(\"tr\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 16\n              }\n            }, /*#__PURE__*/React.createElement(\"td\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 20\n              }\n            }, aplpha[i], \". \"), /*#__PURE__*/React.createElement(\"td\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 42\n              }\n            }, /*#__PURE__*/React.createElement(\"div\", {\n              dangerouslySetInnerHTML: {\n                __html: choices[i].name\n              },\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 46\n              }\n            })), /*#__PURE__*/React.createElement(\"td\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 110\n              }\n            }, aplpha2[i], \". \"), /*#__PURE__*/React.createElement(\"td\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 133\n              }\n            }, /*#__PURE__*/React.createElement(\"div\", {\n              dangerouslySetInnerHTML: {\n                __html: matches[i].name\n              },\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 137\n              }\n            }))));\n          }\n\n          for (let c = 0; c < choices.length; c++) {\n            opt.push( /*#__PURE__*/React.createElement(\"label\", {\n              className: \"option_container\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 824,\n                columnNumber: 14\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              className: \"mark\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 824,\n                columnNumber: 50\n              }\n            }, aplpha[c], \". \")));\n\n            for (let m = 0; m < matches.length; m++) {\n              if (c == 0) {\n                match.push( /*#__PURE__*/React.createElement(\"label\", {\n                  className: \"option_container\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 827,\n                    columnNumber: 20\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"mark\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 827,\n                    columnNumber: 56\n                  }\n                }, aplpha2[m], \" \")));\n              }\n\n              if (answered.includes(choices[c].id + ':' + matches[m].id)) {\n                opt.push( /*#__PURE__*/React.createElement(\"label\", {\n                  className: \"option_container\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 830,\n                    columnNumber: 17\n                  }\n                }, /*#__PURE__*/React.createElement(\"input\", {\n                  defaultChecked: \"true\",\n                  className: \"option_checkbox\",\n                  type: \"checkbox\",\n                  value: choices[c].id + ':' + matches[m].id,\n                  onClick: this.getCheckeboxValue.bind(this),\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 830,\n                    columnNumber: 53\n                  }\n                }), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"checkmark\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 830,\n                    columnNumber: 212\n                  }\n                })));\n              } else {\n                opt.push( /*#__PURE__*/React.createElement(\"label\", {\n                  className: \"option_container\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 832,\n                    columnNumber: 38\n                  }\n                }, /*#__PURE__*/React.createElement(\"input\", {\n                  className: \"option_checkbox\",\n                  type: \"checkbox\",\n                  value: choices[c].id + ':' + matches[m].id,\n                  onClick: this.getCheckeboxValue.bind(this),\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 832,\n                    columnNumber: 74\n                  }\n                }), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"checkmark\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 832,\n                    columnNumber: 211\n                  }\n                })));\n              }\n            }\n\n            opt.push( /*#__PURE__*/React.createElement(\"br\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 836,\n                columnNumber: 15\n              }\n            }));\n            opt.push( /*#__PURE__*/React.createElement(\"br\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 837,\n                columnNumber: 15\n              }\n            }));\n          }\n\n          match_opt = /*#__PURE__*/React.createElement(\"div\", {\n            className: \"match_opts\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 20\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            className: \"option\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 48\n            }\n          }, /*#__PURE__*/React.createElement(\"label\", {\n            className: \"option_container\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 70\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"mark\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 106\n            }\n          })), match, /*#__PURE__*/React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 151\n            }\n          }), /*#__PURE__*/React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 156\n            }\n          }), opt));\n          match_div = /*#__PURE__*/React.createElement(\"table\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"tr\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 24\n            }\n          }, /*#__PURE__*/React.createElement(\"th\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 28\n            }\n          }), /*#__PURE__*/React.createElement(\"th\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 37\n            }\n          }, /*#__PURE__*/React.createElement(\"b\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 41\n            }\n          }, \"column I\"), \" \"), /*#__PURE__*/React.createElement(\"th\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 62\n            }\n          }), /*#__PURE__*/React.createElement(\"th\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 71\n            }\n          }, /*#__PURE__*/React.createElement(\"b\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 75\n            }\n          }, \"column II\"))), list);\n        }\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 845,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"questionHeader\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 846,\n            columnNumber: 10\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 847,\n            columnNumber: 12\n          }\n        }, this.state.questions[index].testSectionQuestionMapping.sectionName), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"question_num\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 848,\n            columnNumber: 15\n          }\n        }, \"Q : \", this.state.questions[index].questionNumber, \"; \\xA0 \"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"question_marks\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 849,\n            columnNumber: 9\n          }\n        }, \"Mark : \", this.state.questions[index].marks, \"; \\xA0\"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"question_neg_marks\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 850,\n            columnNumber: 9\n          }\n        }, \"Negative Mark : \", this.state.questions[index].negativeMarks, \"; \\xA0\"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"question_panel\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 851,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n          icon: faEye,\n          onClick: this.openNav,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 851,\n            columnNumber: 42\n          }\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"question\",\n          id: \"questions_res\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"questionStatement\",\n          dangerouslySetInnerHTML: {\n            __html: this.state.questions[index].groupQuestion\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"questionStatement\",\n          dangerouslySetInnerHTML: {\n            __html: this.state.questions[index].statement\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 8\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          id: type,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 8\n          }\n        }, match_div, match_opt, category != 2 && this.state.questions[index].choices.map((c, i) => /*#__PURE__*/React.createElement(\"p\", {\n          className: \"option\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 860,\n            columnNumber: 8\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          className: \"option_container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 861,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          className: \"option_checkbox\",\n          id: 'checkbox' + i,\n          name: \"option\",\n          defaultChecked: c.checked,\n          type: \"checkbox\",\n          value: c.id,\n          onClick: this.getCheckeboxValue.bind(this),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 862,\n            columnNumber: 10\n          }\n        }), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"checkmark\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 863,\n            columnNumber: 10\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"optiin_desc\",\n          dangerouslySetInnerHTML: {\n            __html: c.name\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 864,\n            columnNumber: 10\n          }\n        })))), text)));\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"testButtons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 876,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.PrevQuestion,\n      disabled: this.prevDisabled(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 877,\n        columnNumber: 4\n      }\n    }, \"PREV\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.NextQuestion,\n      disabled: this.nextDisabled(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 4\n      }\n    }, \"NEXT\"), button, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.EndExamAlert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 880,\n        columnNumber: 4\n      }\n    }, \"FINISH\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      style: {\n        display: \"none\"\n      },\n      id: \"endExam\",\n      onClick: this.EndExam,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 881,\n        columnNumber: 4\n      }\n    }, \"End\")));\n  }\n\n}\n\nexport default TestTaking;","map":{"version":3,"sources":["S:/REACT/Ract-Js/Frlnce/src/pages/test/TestTaking.js"],"names":["React","Component","swal","Timer","Button","FontAwesomeIcon","ApiService","faEye","faTimesCircle","Loader","Utils","TestTaking","constructor","props","startTimer","resetTimer","setState","questime","console","log","goBack","paramsString","location","search","params","URLSearchParams","lms","get","title","history","replace","match","pid","EndExamAlert","text","buttons","dangerMode","then","endExam","EndExam","closeExamAlert","exitExam","clearInterval","state","intervalId","testObject","JSON","parse","localStorage","getItem","i","index","resume","resumeTime","resumeQuestion","question_num","setItem","stringify","online","navigator","onLine","studentPdfResponse","test_id","id","question_array","j","questions","length","answers","marks","category","questionCategory","k","choices","checked","correct","negativeMarks","push","questionId","qnType","timeTaken","question_time","answered","undefined","arr","c","cur","choice","split","matches","Object","keys","attemptedAnswer","d","e","slice","user","userName","enquiryId","tempDate","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","json_data","testTime","loading","res","data","status","splice","pathname","testEndTime","submit","handleKeyUp","event","answer","target","value","mark","questionNumber","class","boxClass","MarkQuestion","reloadQuestionList","NextQuestion","answered_array","addClass","ques_time","parseInt","renderQuestions","UNMarkQuestion","PrevQuestion","message","tests","math","networkError","prevTime","node","createRef","bind","componentDidMount","window","MathJax","Hub","Queue","current","addEventListener","pushState","onbeforeunload","catid","reload","testActive","setInterval","testid","initTestTaking","componentDidUpdate","testisActive","isActive","document","getElementById","click","catch","error","testId","testName","name","totalMarks","noOfQuestions","getCheckeboxValue","singleOpt","chks","getElementsByTagName","onclick","includes","prevDisabled","nextDisabled","question","openNav","isMobile","isMobileDevice","style","width","right","closeNav","showQuestion","preventDefault","currentTime","time","currentTimeSeconds","render","portlet","renderSidePanel","renderSidePanelNumbers","list","button","type","map","item","opt","aplpha","aplpha2","match_div","match_opt","__html","m","testSectionQuestionMapping","sectionName","groupQuestion","statement","display"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport swal from 'sweetalert';\r\nimport Timer from \"../../_components/timer/timer\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport ApiService from \"../../_services/ApiService\";\r\nimport { faEye,faTimesCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport './Test.css';\r\nimport Loader from './../../_components/loader/loader';\r\nimport Utils from \"../../_helpers/utils\";\r\n\r\nclass TestTaking extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            questions: [],\r\n            message: null,\r\n\t\t\tquestion_num : 0,\r\n\t\t\tboxClass:['notvisited'],\r\n\t\t\taddClass: false,\r\n\t\t\tmark: false,\r\n\t\t\tchecked:false,\r\n\t\t\ttests:[],\r\n\t\t\tmath: '',\r\n\t\t\tquestime: 0,\r\n\t\t\tloading: false,\r\n\t\t\tnetworkError:0,\r\n\t\t\tprevTime:0\r\n\t\t};\r\n\t\tthis.node = React.createRef();\r\n\t\tthis.reloadQuestionList = this.reloadQuestionList.bind(this);\r\n\t\t//this.startTimer = this.startTimer.bind(this);\r\n\t\t//this.resetTimer = this.resetTimer.bind(this);\r\n\t}\r\n\t\r\n\t\r\n\r\n    componentDidMount() {\r\n       \r\n\t\tthis.reloadQuestionList();\r\n        this.startTimer();\r\n\t\tif (window.MathJax !== undefined) {\r\n\t\t    window.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub,this.node.current]);\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', function() {\r\n\t\t\twindow.history.pushState({}, '')\r\n\t\t})\r\n\t\t\r\n\t\tlet paramsString = this.props.location.search;\r\n        const params = new URLSearchParams(paramsString);\r\n        let lms =  params.get('lms');\r\n\t\tlet title =  params.get('title');\r\n\r\n\t\t/*window.addEventListener(\"visibilitychange\", function() {\r\n\t\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\t\tvar i = localStorage.getItem('test_id');\r\n\t\t\tvar catid = localStorage.getItem('test_catid');\r\n\t\t\ttestObject[i].resume=1;\r\n\t\t\ttestObject[i].resumeTime = localStorage.getItem('time_left');\r\n\t\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\t\tif(lms==1){\r\n\t\t\t  window.history.pushState(null, null, '/lesson/steps/attachments/'+catid+'/'+title+'?back=quiz');\r\n\t\t\t}else{\r\n\t\t\t  window.history.pushState(null, null, '/TestList/'+catid);\r\n\t\t\t}\r\n\t\t\twindow.location.reload();\r\n\t\t});*/\r\n         window.onbeforeunload = function () {\r\n\t\t  var testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\t  var i = localStorage.getItem('test_id');\r\n\t\t  testObject[i].resume=1;\r\n\t\t  testObject[i].resumeTime = localStorage.getItem('time_left');\r\n\t\t  localStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\t }\r\n\r\n\t\t window.addEventListener('popstate', function() {\r\n\t\t  window.history.pushState({}, '');\r\n\t\t  //this.closeExamAlert();\r\n\t\t  //document.getElementById(\"testclose\").click();\r\n\t\t  var testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\t  if(typeof testObject !== 'undefined' && testObject.length > 0){\r\n\t\t\t  var i = localStorage.getItem('test_id');\r\n\t\t\t  var catid = localStorage.getItem('test_catid');\r\n\t\t\t  if(lms==1 && i){\r\n\t\t\t\t  testObject[i].resume=1;\r\n\t\t\t\t  testObject[i].resumeTime = localStorage.getItem('time_left');\r\n\t\t\t\t  localStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\t\t\t  window.history.pushState(null, null, '/lesson/steps/attachments/'+catid+'/'+title+'?back=quiz');\r\n\t\t\t  }else if(i){\r\n\t\t\t\t  testObject[i].resume=1;\r\n\t\t\t\t  testObject[i].resumeTime = localStorage.getItem('time_left');\r\n\t\t\t\t  localStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\t\t\t  window.history.pushState(null, null, '/TestList/'+catid);\r\n\t\t\t  }else{\r\n\t\t\t\t  window.history.pushState(null, null, '/TestList/'+catid);\r\n\t\t\t  }\r\n\t\t\t  window.location.reload();\r\n\t\t  }else{\r\n\t\t\t  var catid = localStorage.getItem('test_catid');\r\n\t\t\t  if(lms==1){\r\n\t\t\t\t  window.history.pushState(null, null, '/lesson/steps/attachments/'+catid+'/'+title+'?back=quiz');\r\n\t\t\t  }else{\r\n\t\t\t\t  window.history.pushState(null, null, '/TestList/'+catid);\r\n\t\t\t  }\r\n\t\t\t  window.location.reload();\r\n\t\t  }\r\n\t\t  /*swal({\r\n\t\t\ttitle: \"CONFIRM\",\r\n\t\t\ttext: \"Are you sure you want to quit the Test?\",\r\n\t\t\tbuttons: ['No','Yes'],\r\n\t\t\tdangerMode: true,\r\n\t\t\t})\r\n\t\t\t.then(exitExam => {\r\n\t\t\t\tif (exitExam) {\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}\r\n\t\t    });*/\r\n\t\t})\r\n\t\t this.testActive();\r\n\t\t var intervalId = setInterval(()=> this.testActive(), 60000);\r\n\t\t this.setState({intervalId: intervalId});\r\n\t\t let testid = this.props.match.params.id;\r\n\t\t this.initTestTaking(testid);\r\n\t\t\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif (window.MathJax !== undefined) {\r\n\t\t\twindow.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub,this.node.current]);\r\n\t\t}\r\n\t\t//this.startTimer();\r\n\t}\r\n\t\r\n\tasync testActive() {\r\n\t\tlet testid = this.props.match.params.id;\r\n\t\tApiService.testisActive(testid)\r\n\t\t.then((res) => {\r\n\t\t   if(res.data.isActive==false){\r\n               document.getElementById(\"endExam\").click();\r\n\t\t   }\r\n\t\t}).catch((error) => {\r\n\t\t   if(this.state.networkError==2){\r\n\t\t\t   clearInterval(this.state.intervalId);\r\n\t\t\t   var testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\t\t   if(typeof testObject !== 'undefined' && testObject.length > 0){\r\n\t\t\t\t  var i = localStorage.getItem('test_id');\r\n\t\t\t\t  var catid = localStorage.getItem('test_catid');\r\n\t\t\t\t  testObject[i].resume=1;\r\n\t\t\t\t  testObject[i].resumeTime = localStorage.getItem('time_left');\r\n\t\t\t\t  localStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\t\t\t  window.history.pushState(null, null, '/TestList/'+catid);\r\n\t\t\t   }\r\n\t\t\t   swal({\r\n\t\t\t\ttitle: \"Alert\",\r\n\t\t\t\ttext: \"Could not Connect to Server. Please check your Internet connection and try again Later.\",\r\n\t\t\t\tdangerMode: true,\r\n\t\t\t  })\r\n\t\t\t  .then(endExam => {\r\n\t\t\t\t\tif (endExam) {\r\n\t\t\t\t\t\tthis.goBack();\r\n\t\t\t\t\t}\r\n\t\t\t  });\r\n\t\t   }else{\r\n\t\t\t   this.setState({networkError: this.state.networkError + 1});\r\n\t\t   }\r\n        });\r\n    }\r\n\t\r\n\tstartTimer = () => {\r\n    /* this.timer = setInterval(() => this.setState({\r\n      questime: this.state.questime + 1\r\n     }), 1000)\r\n     console.log(\"start\");*/\r\n    }\r\n\t\r\n\tresetTimer = () => {\r\n      this.setState({questime: 0})\r\n      console.log(\"reset\")\r\n    }\r\n\r\n    reloadQuestionList() {\r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\tfor(var i=0; i<testObject.length; i++){\r\n            if(testObject[i].id==this.props.match.params.id){\r\n\t\t\t\tthis.setState({index:i});\r\n\t\t\t\tthis.setState({testId: testObject[i].id});\r\n\t\t\t\tthis.setState({questions: testObject[i].questions});\r\n\t\t\t\tthis.setState({testName: testObject[i].name});\r\n\t\t\t\tif(testObject[i].resumeTime){\r\n\t\t\t\t  this.setState({testTime: parseInt(testObject[i].resumeTime)});\r\n\t\t\t\t}else{\r\n\t\t\t\t  this.setState({testTime: parseInt(testObject[i].testTime)*60});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(testObject[i].resumeQuestion){\r\n\t\t\t\t\tthis.setState({question_num: parseInt(testObject[i].resumeQuestion)});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({totalMarks: testObject[i].totalMarks});\r\n\t\t\t\tthis.setState({noOfQuestions: testObject[i].noOfQuestions});\r\n\t\t\t\tlocalStorage.setItem('test_id', i);\r\n\t\t\t\tlocalStorage.setItem('test_catid', this.props.match.params.pid);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitTestTaking(testId) {\r\n\t\tthis.setState({ loading: true }, () => {\r\n\t\t  ApiService.initTestTaking(testId)\r\n\t\t  .then((res) => {\r\n\t\t\t  this.setState({\r\n\t\t\t\tloading: false,\r\n\t\t\t  });\r\n\t\t  });\r\n\t\t});\t\r\n\t}\r\n\r\n\tgoBack = () => {\r\n\t\tlet paramsString = this.props.location.search;\r\n        const params = new URLSearchParams(paramsString);\r\n        let lms =  params.get('lms');\r\n\t\tlet title =  params.get('title');\r\n\t\tif(lms==1){\r\n\t\t   this.props.history.replace('/lesson/steps/attachments/'+this.props.match.params.pid+'/'+title+'?back=quiz');\r\n\t\t}else{\r\n\t\t   this.props.history.replace('/TestList/'+this.props.match.params.pid);\r\n\t\t}\r\n\t}\r\n\t\r\n    EndExamAlert = () => {\r\n\t\tswal({\r\n\t\t\ttitle: \"CONFIRM\",\r\n\t\t\ttext: \"Are you sure you want to submit the Test?\",\r\n\t\t\tbuttons: ['No','Yes'],\r\n\t\t\tdangerMode: true,\r\n\t\t\t})\r\n\t\t\t.then(endExam => {\r\n\t\t\t\tif (endExam) {\r\n\t\t\t\t\tthis.EndExam();\r\n\t\t\t\t}\r\n\t\t    });\r\n    }\r\n\r\n    closeExamAlert = () => {\r\n\t\tswal({\r\n\t\t\ttitle: \"CONFIRM\",\r\n\t\t\ttext: \"Are you sure you want to quit the Test?\",\r\n\t\t\tbuttons: ['No','Yes'],\r\n\t\t\tdangerMode: true,\r\n\t\t\t})\r\n\t\t\t.then(exitExam => {\r\n\t\t\t\tif (exitExam) {\r\n\t\t\t\t\tclearInterval(this.state.intervalId);\r\n\t\t\t\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\t\t\t\tvar i = this.state.index;\r\n\t\t\t\t\ttestObject[i].resume=1;\r\n\t\t\t\t\ttestObject[i].resumeTime = localStorage.getItem('time_left');\r\n\t\t\t\t\ttestObject[i].resumeQuestion = this.state.question_num;\r\n\t\t\t\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\t\t\t\tthis.goBack();\r\n\t\t\t\t}\r\n\t\t    });\r\n    }\r\n\r\n   EndExam = () => {\r\n\tclearInterval(this.state.intervalId);\r\n\tvar online = navigator.onLine;\r\n\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\tvar i = this.state.index;\r\n\tvar studentPdfResponse = testObject[i].studentPdfResponse;\r\n\tvar test_id = testObject[i].id;\r\n\t//online = false;\r\n\tif(online == true){\r\n        var question_array = [];\r\n\t\tfor (var j = 0; j < testObject[i].questions.length; j++) {\r\n\t\t\t var answers =''; var marks='';\r\n\t\t\t let category = testObject[i].questions[j].questionCategory;\r\n\t\t\t if(category==1 || category==26){\r\n\t\t\t\tfor(var k=0; k < testObject[i].questions[j].choices.length; k++){\r\n\t\t\t\t\tif(testObject[i].questions[j].choices[k].checked==1){\r\n\t\t\t\t\t\tanswers += testObject[i].questions[j].choices[k].id+',';\r\n\t\t\t\t\t\tif(testObject[i].questions[j].choices[k].correct==true){\r\n\t\t\t\t\t\t\tmarks = testObject[i].questions[j].marks;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tmarks = \"-\"+testObject[i].questions[j].negativeMarks;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(answers){ answers = answers.replace(/,(?=\\s*$)/, ''); }\r\n\t\t\t\tquestion_array.push({\r\n\t\t\t\t\tquestionId: \"\"+testObject[i].questions[j].id+\"\",\r\n\t\t\t\t\tanswers: \"\"+answers+\"\",\r\n\t\t\t\t\tqnType:\"mcq\",\r\n\t\t\t\t\tmarks : \"\"+marks+\"\",\r\n\t\t\t\t\ttimeTaken : \"\"+(testObject[i].questions[j].question_time*1000)+\"\"\r\n\t\t\t\t});\r\n\t\t\t}else if(category==4 || category==7 || category==0 || category==5){\r\n\t\t\t\t//alert(testObject[i].questions[j].answered);\r\n\t\t\t\tif(testObject[i].questions[j].answered==undefined){\r\n\t\t\t\t\ttestObject[i].questions[j].answered = '';\r\n\t\t\t\t}\r\n\t\t\t\t//alert(testObject[i].questions[j].answered);\r\n\t\t\t\tquestion_array.push({\r\n\t\t\t\t\tquestionId: \"\"+testObject[i].questions[j].id+\"\",\r\n\t\t\t\t\tanswers: \"\"+testObject[i].questions[j].answered+\"\",\r\n\t\t\t\t\tqnType:\"textAnswer\",\r\n\t\t\t\t\tmarks : \"\"+marks+\"\",\r\n\t\t\t\t\ttimeTaken : \"\"+(testObject[i].questions[j].question_time*1000)+\"\"\r\n\t\t\t\t});\r\n\t\t\t}else if(category==2){\r\n\t\t\t\tvar questionId = testObject[i].questions[j].id;\r\n\t\t\t\tvar arr = testObject[i].questions[j].answered;\r\n\r\n\t\t\t\tvar answered = {};\r\n\t\t\t\tif(arr!=undefined){\r\n\t\t\t\t\tfor(var c = 0 ; c < arr.length ; c++){\r\n\t\t\t\t\t\tvar cur = arr[c];\r\n\t\t\t\t\t\tvar choice  = cur.split(\":\")[0];\r\n\t\t\t\t\t\tvar match  = cur.split(\":\")[1];\r\n\t\t\t\t\t\tif(answered[choice]){\r\n\t\t\t\t\t\t\tvar matches = answered[choice] ;\r\n\t\t\t\t\t\t\tmatches.push(match)\r\n\t\t\t\t\t\t\tanswered[choice] = matches; \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tvar matches = [];\r\n\t\t\t\t\t\t\tmatches.push(match)\r\n\t\t\t\t\t\t\tanswered[choice] = matches;     \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t    }\r\n\r\n\t\t\t\tvar answers = Object.keys(answered);\r\n\t\t\t\tvar attemptedAnswer = \"\";\r\n\t\t\t\tfor(var d = 0 ; d < answers.length ; d++){\r\n\t\t\t\t\tvar choice = answers[d];\r\n\t\t\t\t\tattemptedAnswer+=choice+\":\"\r\n\t\t\t\t\tfor(var e = 0 ; e < answered[choice].length ; e++){\r\n\t\t\t\t\t\tattemptedAnswer+=answered[choice][e]+\";\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tattemptedAnswer = attemptedAnswer.slice(0, attemptedAnswer.length - 1);\r\n\t\t\t\t\tattemptedAnswer+=\",\"\r\n\t\t\t\t}\r\n\t\t\t\tattemptedAnswer = attemptedAnswer.slice(0, attemptedAnswer.length - 1);\r\n\r\n                question_array.push({\r\n\t\t\t\t\tquestionId: \"\"+questionId+\"\",\r\n\t\t\t\t\tanswers: \"\"+attemptedAnswer+\"\",\r\n\t\t\t\t\tqnType:\"mcq\",\r\n\t\t\t\t\tmarks : \"5\",\r\n\t\t\t\t\ttimeTaken : \"\"+(testObject[i].questions[j].question_time*1000)+\"\"\r\n\t\t\t\t}); \r\n\t\t\t}\r\n\t\t}\t\r\n\t\tlet user = JSON.parse(localStorage.getItem('user')) || [];\r\n\t\tif(!user.userName){\r\n\t\t\tuser.userName = \"\";\r\n\t\t\tuser.enquiryId = localStorage.getItem('enquiryId');\r\n\t\t}\r\n\t\t\r\n\t\tvar tempDate = new Date();\r\n        var date = tempDate.getFullYear() + '-' + (tempDate.getMonth()+1) + '-' + tempDate.getDate() +' '+ tempDate.getHours()+':'+ tempDate.getMinutes()+':'+ tempDate.getSeconds();\r\n\t\tvar json_data  = {\r\n\t\t\t\"info\" : {\r\n\t\t\t   \"studentCode\"   : \"\"+user.userName+\"\",\r\n\t\t\t   \"enquiryId\"     : \"\"+user.enquiryId+\"\",\r\n\t\t\t   \"testId\"        : \"\"+testObject[i].id+\"\",\r\n\t\t\t   \"testPaperId\"   : \"0\",\r\n\t\t\t   \"startDate\"     : \"\"+date+\"\",\r\n\t\t\t   \"timeTaken\"     : \"\"+this.state.testTime+\"\"\r\n\t\t\t},\r\n\t\t\t\"attempts\" : question_array\r\n\t\t}\r\n        this.setState({ loading: true }, () => {\r\n\t\t\tApiService.endExam(json_data)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif(res.data.status==1){\r\n\t\t\t\t\tfor (var i = 0; i < testObject.length; i++) {\r\n\t\t\t\t\tif (testObject[i].id == this.props.match.params.id) {\r\n\t\t\t\t\t\ttestObject.splice(i, 1); //remove item from array\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\t\t\t\tthis.setState({ loading: false});\r\n\t\t\t\t\tif(studentPdfResponse==false){\r\n\t\t\t\t\t   this.goBack();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t   this.props.history.push({pathname: \"/test/upload/\"+ test_id , state: { testEndTime: 0 }});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswal({\r\n\t\t\t\t\t\ttitle: \"Alert\",\r\n\t\t\t\t\t\ttext: \"Could not Connect to Server. Please check your Internet connection and try again Later.\",\r\n\t\t\t\t\t\tdangerMode: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}else{\t\r\n        testObject[i].submit=1;\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\tthis.goBack();\r\n\t}\r\n\r\n   }\r\n\t\r\n   getCheckeboxValue(event) {\r\n\t\tconst choice = event.target.value;\r\n\t\tconst status = event.target.checked;\r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [] ; var checked =0; var mark = 0;\r\n\t\tvar i = this.state.index;\r\n\t\tfor (var j = 0; j < testObject[i].questions.length; j++) {\r\n\t\t\tif(this.state.question_num+1 === testObject[i].questions[j].questionNumber){  //look for match with id\r\n\t\t\t   let category = testObject[i].questions[j].questionCategory;\r\n\t\t\t   if(category==1 || category==26){\r\n\t\t\t\tfor(var k=0; k < testObject[i].questions[j].choices.length; k++){\t\r\n\t\t\t\t\tif(choice == testObject[i].questions[j].choices[k].id && category==1){\r\n\t\t\t\t\t\tif(status){\r\n\t\t\t\t\t\t testObject[i].questions[j].choices[k].checked = 1;\r\n\t\t\t\t\t\t testObject[i].questions[j].class=\"answered\";\r\n\t\t\t\t\t\t this.setState({ boxClass : \"answered\" });\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t testObject[i].questions[j].choices[k].checked = 0;\r\n\t\t\t\t\t\t testObject[i].questions[j].class=\"notanswered\";\r\n\t\t\t\t\t\t this.setState({ boxClass : \"notanswered\" });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.setState({ addClass : true });\r\n\t\t\t\t\t\tif(testObject[i].questions[j].mark){ mark = 1; }\r\n\t\t\t\t\t\tbreak;  //exit loop since you found the choice\r\n\t\t\t\t\t}else if(category==26){\r\n\t\t\t\t\t\tvar singleOpt = document.getElementById(\"single_opt\");\r\n\t\t\t\t\t\tvar chks = singleOpt.getElementsByTagName(\"INPUT\");\r\n\t\t\t\t\t\tfor (var c = 0; c < chks.length; c++) {\r\n\t\t\t\t\t\t\tchks[c].onclick = function () {\r\n\t\t\t\t\t\t\t\tfor (var c = 0; c < chks.length; c++) {\r\n\t\t\t\t\t\t\t\t\tif (chks[c] != this && this.checked) {\r\n\t\t\t\t\t\t\t\t\t\tchks[c].checked = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(choice == testObject[i].questions[j].choices[k].id && status){\r\n\t\t\t\t\t\t\ttestObject[i].questions[j].choices[k].checked = 1;\r\n\t\t\t\t\t\t\ttestObject[i].questions[j].class=\"answered\";\r\n\t\t\t\t\t\t\tthis.setState({ boxClass : \"answered\" });\r\n\t\t\t\t\t\t\tchecked = 1;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttestObject[i].questions[j].choices[k].checked = 0;\r\n\t\t\t\t\t\t\ttestObject[i].questions[j].class=\"notanswered\";\r\n\t\t\t\t\t\t    this.setState({ boxClass : \"notanswered\" });\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.setState({ addClass : true });\r\n\t\t\t\t\t\tif(testObject[i].questions[j].mark){ mark = 1; }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t   }else if(category==2){\r\n\t\t\t\t\t var answered_array =  testObject[i].questions[j].answered || [];\r\n\t\t\t\t\t if(status){\r\n\t\t\t\t\t\tif (!answered_array.includes(choice)) {\r\n\t\t\t\t\t\t\tanswered_array.push(choice);\r\n\t\t\t\t\t\t\ttestObject[i].questions[j].answered=answered_array;\r\n\t\t\t\t\t\t\ttestObject[i].questions[j].class=\"answered\";\r\n\t\t\t\t\t\t\tthis.setState({ boxClass : \"answered\" });\r\n\t\t\t\t\t\t\tchecked = 1;\r\n\t\t\t\t\t\t\tconsole.log(\"answered\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  }else{\r\n\t\t\t\t\t\tfor (var i = 0; i < answered_array.length; i++) { //loop over the collection\r\n\t\t\t\t\t\t\tif (answered_array[i] == choice) { //see if choice match\r\n\t\t\t\t\t\t\t\tanswered_array.splice(i, 1); //remove item from array\r\n\t\t\t\t\t\t\t\tbreak; //exit loop\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  if(answered_array.length == 0){\r\n\t\t\t\t\t\ttestObject[i].questions[j].class=\"notanswered\";\r\n\t\t\t\t\t\tthis.setState({ boxClass : \"notanswered\" }); \r\n\t\t\t\t\t\tconsole.log(\"notanswered\");\r\n\t\t\t\t\t  }\r\n\t\t\t   }\r\n\t\t\t   \r\n\t\t\t   if(checked==1){\r\n\t\t\t\t\ttestObject[i].questions[j].class=\"answered\";\r\n\t\t\t\t\tthis.setState({ boxClass : \"answered\" });\r\n\t\t\t   }\r\n\t\t\t   //if(testObject[i].questions[j].mark){ mark = 1; }\r\n\t\t\t   break;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\t\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\tif(mark==1){this.MarkQuestion();}\r\n\t\tthis.reloadQuestionList();\t\t\r\n\t}\r\n\r\n\thandleKeyUp = event => {\r\n\t\tvar answer = event.target.value;\r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];var mark = 0;\r\n\t\tvar i = this.state.index;\r\n\t\tfor (var j = 0; j < testObject[i].questions.length; j++) {\r\n\t\t\tlet category = testObject[i].questions[j].questionCategory;\r\n\t\t\tif(this.state.question_num+1 === testObject[i].questions[j].questionNumber){  //look for match with id\r\n\t\t\t    if(category==4 || category==7 || category==0 || category==5){\r\n\t\t\t\t  if(answer){\r\n\t\t\t\t    testObject[i].questions[j].answered=answer;\r\n\t\t\t\t    testObject[i].questions[j].class=\"answered\";\r\n\t\t\t\t    this.setState({ boxClass : \"answered\" });\r\n\t\t\t\t  }else{\r\n\t\t\t\t\ttestObject[i].questions[j].answered='';\r\n\t\t\t\t    testObject[i].questions[j].class=\"notanswered\";\r\n\t\t\t\t    this.setState({ boxClass : \"notanswered\" });\r\n\t\t\t\t  }\r\n\t\t\t\t  if(testObject[i].questions[j].mark){ mark = 1; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\tif(mark==1){this.MarkQuestion();}\r\n\t\tthis.reloadQuestionList();\r\n\t}\r\n\r\n\tNextQuestion = () => {\r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || []; var checked =0;\r\n\t\tvar category = testObject[this.state.index].questions[this.state.question_num].questionCategory;\r\n\t\tif(this.state.question_num < (testObject[this.state.index].questions.length-1)){\r\n\t\t  if(category==1 || category == 26){\r\n\t\t\tfor (var c = 0; c < testObject[this.state.index].questions[this.state.question_num].choices.length; c++) {\r\n\t\t\t\tif(testObject[this.state.index].questions[this.state.question_num].choices[c].checked==1){\r\n\t\t\t\t\tchecked = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t  }else if(category == 4 || category==7 || category==0 || category==5){\r\n\t\t\tif(testObject[this.state.index].questions[this.state.question_num].answered){\r\n\t\t\t\tchecked = 1;\r\n\t\t\t}\r\n\t\t  }else if(category == 2){\r\n\t\t     var answered_array =  testObject[this.state.index].questions[this.state.question_num].answered || [];\r\n\t\t\t if(answered_array.length){\r\n\t\t\t    checked = 1;\r\n\t\t\t }\r\n\t\t  }\r\n\r\n\t\t  if(checked==0){\r\n\t\t\ttestObject[this.state.index].questions[this.state.question_num].class=\"notanswered\";\r\n\t\t\tthis.setState({ boxClass : \"notanswered\" });\r\n\t\t\tthis.setState({ addClass : true });\r\n\t\t  }\r\n\t\t  \r\n\t\t  if(!localStorage.getItem('prevTime')){\r\n\t\t      localStorage.setItem('prevTime', testObject[this.state.index].testTime*60);\r\n\t\t  }\r\n\t\t  if(!testObject[this.state.index].questions[this.state.question_num].question_time){\r\n\t\t\t//alert(localStorage.getItem('prevTime') - localStorage.getItem('time_left'));\r\n\t\t    testObject[this.state.index].questions[this.state.question_num].question_time = localStorage.getItem('prevTime') - localStorage.getItem('time_left');\r\n\t\t  }else{\r\n\t\t\tvar ques_time = testObject[this.state.index].questions[this.state.question_num].question_time;\r\n\t\t\ttestObject[this.state.index].questions[this.state.question_num].question_time = parseInt(ques_time) + parseInt(localStorage.getItem('prevTime')) - parseInt(localStorage.getItem('time_left'));\r\n\t\t  }\r\n\t\t  localStorage.setItem('prevTime', localStorage.getItem('time_left'));\r\n\t\t  \r\n\t\t  this.setState({ question_num: this.state.question_num + 1 });\r\n\t\t  testObject[this.state.index].resumeQuestion = this.state.question_num + 1;\r\n\t\t}\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\tthis.reloadQuestionList();\r\n\t\tthis.renderQuestions();\r\n\t\tthis.resetTimer();\r\n\t\tthis.startTimer();\r\n\t}\r\n\t\r\n\tMarkQuestion = () => {\r\n\t\t  \r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || []; var checked =0;\r\n\t\tvar category = testObject[this.state.index].questions[this.state.question_num].questionCategory;\r\n\t\tif(category==1 || category == 26){\r\n\t\t\tfor (var c = 0; c < testObject[this.state.index].questions[this.state.question_num].choices.length; c++) {\r\n\t\t\t\tif(testObject[this.state.index].questions[this.state.question_num].choices[c].checked==1){\r\n\t\t\t\t\tchecked = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t    }else if(category == 4 || category==7 || category==0 || category==5){\r\n\t\t\tif(testObject[this.state.index].questions[this.state.question_num].answered){\r\n\t\t\t\tchecked = 1;\r\n\t\t\t}\r\n\t\t}else if(category==2){\r\n\t\t\tvar answered_array =  testObject[this.state.index].questions[this.state.question_num].answered || [];\r\n\t\t\tif(answered_array.length == 0){\r\n\t\t\t\tchecked = 1; \r\n\t\t\t}\r\n\t\t}\r\n\t\tif(checked==0){\r\n\t\t\ttestObject[this.state.index].questions[this.state.question_num].mark=\"marked\";\r\n\t\t\tthis.setState({ boxClass : \"marked\" });\r\n\t\t\tthis.setState({ addClass : true });\r\n\t\t}else{\r\n\t\t\ttestObject[this.state.index].questions[this.state.question_num].mark=\"markedanswered\";\r\n\t\t\tthis.setState({ boxClass : \"markedanswered\" });\r\n\t\t\tthis.setState({ addClass : true });  \r\n\t\t}\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\tthis.reloadQuestionList();\r\n\t}\r\n\r\n\tUNMarkQuestion = () => {\r\n\t\t  \r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || []; var checked =0;\r\n\t\tvar category = testObject[this.state.index].questions[this.state.question_num].questionCategory;\r\n\t\tif(category==1 || category == 26){\r\n\t\t\tfor (var c = 0; c < testObject[this.state.index].questions[this.state.question_num].choices.length; c++) {\r\n\t\t\t\tif(testObject[this.state.index].questions[this.state.question_num].choices[c].checked==1){\r\n\t\t\t\t\tchecked = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(category==4 || category==7 || category==0 || category==5){\r\n\t\t\tif(testObject[this.state.index].questions[this.state.question_num].answered){\r\n\t\t\t\tchecked = 1;\r\n\t\t\t}\r\n\t\t}else if(category==2){\r\n\t\t\tvar answered_array =  testObject[this.state.index].questions[this.state.question_num].answered || [];\r\n\t\t\tif(answered_array.length == 0){\r\n\t\t\t\tchecked = 1; \r\n\t\t\t}\r\n\t\t}\r\n\t\tif(checked==0){\r\n\t\t\ttestObject[this.state.index].questions[this.state.question_num].mark=\"\";\r\n\t\t\tthis.setState({ boxClass : \"\" });\r\n\t\t\tthis.setState({ addClass : true });\r\n\t\t}else{\r\n\t\t\ttestObject[this.state.index].questions[this.state.question_num].mark=\"\";\r\n\t\t\tthis.setState({ boxClass : \"\" });\r\n\t\t\tthis.setState({ addClass : true });  \r\n\t\t}\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\tthis.reloadQuestionList();\r\n\t}\r\n\t  \r\n\tPrevQuestion = () => {\r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t\tif(this.state.question_num >=1 ){\r\n\t\t  this.setState({ question_num: this.state.question_num - 1 });\r\n\t\t  testObject[this.state.index].resumeQuestion = this.state.question_num - 1;\r\n\t\t  \r\n\t\t  if(!localStorage.getItem('prevTime')){\r\n\t\t      localStorage.setItem('prevTime', testObject[this.state.index].testTime*60);\r\n\t\t  }\r\n\t\t  if(!testObject[this.state.index].questions[this.state.question_num].question_time){\r\n\t\t    testObject[this.state.index].questions[this.state.question_num].question_time = localStorage.getItem('prevTime') - localStorage.getItem('time_left');\r\n\t\t  }else{\r\n\t\t\tvar ques_time = testObject[this.state.index].questions[this.state.question_num].question_time;\r\n\t\t\ttestObject[this.state.index].questions[this.state.question_num].question_time = parseInt(ques_time) + parseInt(localStorage.getItem('prevTime')) - parseInt(localStorage.getItem('time_left'));\r\n\t\t  }\r\n\t\t  localStorage.setItem('prevTime', localStorage.getItem('time_left'));\r\n\t\t  \r\n\t\t}\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t}\r\n\t\r\n\tprevDisabled(){\r\n\t   if(this.state.question_num === 0){\r\n\t\t return true;\r\n\t   }else{\r\n\t     return false;\r\n\t   }\r\n\t}\r\n\t\r\n\tnextDisabled(){\r\n\t   let question = this.state.questions;\r\n\t   if(this.state.question_num < (question.length-1)){\r\n\t\t return false;\r\n\t   }else{\r\n\t     return true;\r\n\t   }\r\n\t}\r\n\t\r\n\topenNav() {\r\n\t  let isMobile = Utils.isMobileDevice();\r\n\t  if(isMobile===true){\r\n\t\tdocument.getElementById(\"QuestionsSidenav\").style.width = \"100%\";\r\n\t  }else{\r\n\t\tdocument.getElementById(\"QuestionsSidenav\").style.width = \"30%\";\r\n\t\tdocument.getElementById(\"sidenavclose\").style.right = \"71%\";\r\n\t  }\r\n\t}\r\n\t\r\n\tcloseNav() {\r\n\t  document.getElementById(\"QuestionsSidenav\").style.width = \"0\";\r\n\t}\r\n\t\r\n\tshowQuestion (e,id) {\r\n\t\te.preventDefault();\r\n\t\tthis.setState ({ question_num: id });\r\n\t\tvar testObject = JSON.parse(localStorage.getItem('tests')) || [];\r\n\t    testObject[this.state.index].resumeQuestion = id;\r\n\t\tlocalStorage.setItem(\"tests\", JSON.stringify(testObject));\r\n\t\tdocument.getElementById(\"QuestionsSidenav\").style.width = \"0\";\r\n\t}\r\n\r\n\tcurrentTime(time){\r\n\t\t//alert(time);\r\n\t\tthis.setState({ \r\n\t\t\tcurrentTimeSeconds: time,\r\n\t\t});\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tlet portlet = JSON.parse(localStorage.getItem('portlet')) || [];\r\n\t\tconst { loading } = this.state;\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<div className={`test-header ${portlet.class ? portlet.class : 'orange-card'}`}>\r\n\t\t\t\t<div className=\"testclose\" id=\"testclose\">\r\n\t\t\t\t\t<FontAwesomeIcon icon={ faTimesCircle } id=\"closeAlert\" onClick={this.closeExamAlert} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4>{this.state.testName}</h4> \r\n\t\t\t\t<div className=\"timer\">\r\n\t\t\t\t  {this.state.testTime > 0 &&\t\r\n\t\t\t\t\t<Timer startTimeInSeconds={parseInt(this.state.testTime)} currentTime={this.currentTime.bind(this)} EndExam={this.EndExam.bind(this)}  type=\"mobile\" />\r\n\t\t\t\t  }\r\n\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.renderSidePanel()}\r\n\t\t\t\t{loading ?  <Loader />: this.renderQuestions()}\r\n\t\t\t</div>\r\n\t\t)\t\r\n    }\r\n\t\r\n\trenderSidePanel() {\r\n\t\tlet portlet = JSON.parse(localStorage.getItem('portlet')) || [];\r\n\t\treturn (\r\n\t\t\t<div id=\"QuestionsSidenav\" className=\"QuestionsSidenav\">\r\n\t\t\t\t\t <div className={`test-header ${portlet.class ? portlet.class : 'orange-card'}`}>\r\n\t\t\t\t\t  <h4>Review</h4> \r\n\t\t\t\t\t  <div className=\"sidenavclose\" id=\"sidenavclose\">\r\n\t\t\t\t\t\t<FontAwesomeIcon icon={ faTimesCircle } onClick={this.closeNav} />\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"questionspanelno\">\r\n\t\t\t\t\t     <p>Tap on the Question no. you want to review </p>\r\n\t\t\t\t\t\t   <div className=\"questionstatus\">\r\n\t\t\t\t\t\t\t <span className=\"answered\">Answered</span> \r\n\t\t\t\t\t\t\t <span className=\"marked\">Marked</span>\r\n\t\t\t\t\t\t\t <span className=\"markedanswered\">Marked & Answered</span>\r\n\t\t\t\t\t\t\t <span className=\"notanswered\">Not Answered</span>\r\n\t\t\t\t\t\t\t <span className=\"notvisited\">Not Visited</span>\r\n\t\t\t\t\t\t   </div>\r\n\t\t\t\t\t\t   <div className=\"questionsnumbers\">\r\n\t\t\t\t\t         {this.renderSidePanelNumbers()}\r\n\t\t\t\t\t\t   </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n    }\r\n\t\r\n\trenderSidePanelNumbers() {\r\n\t\t\r\n\t\tlet list = [];\r\n\t\tlet question = this.state.questions;\r\n\t\t//console.log(question);\r\n\t\tfor(let i=0; i<question.length; i++){\r\n\t\t\tif(question[i].mark){\r\n\t\t\t  list.push(<Button onClick={(e) => this.showQuestion(e,i)} className={question[i].mark}>{i+1} </Button>);\r\n\t\t\t}else if(question[i].class){\r\n\t\t\t\tlist.push(<Button onClick={(e) => this.showQuestion(e,i)} className={question[i].class}>{i+1} </Button>);\r\n\t\t\t}else{\r\n\t\t\t  list.push(<Button onClick={(e) => this.showQuestion(e,i)} className=\"\">{i+1} </Button>);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn <div className=\"questions-list\">{list}</div>;\t\t    \r\n\t}\r\n\r\n\trenderQuestions() {\r\n\t\tlet button = null;\r\n\t\tlet text = \"\";\r\n\t\tlet type = \"\";\r\n\t\t\r\n\t\treturn  <div className=\"questions_list\"> \r\n\t\t{\r\n\t\t  this.state.questions.map((item, index) => {\r\n\t\t    if(index===this.state.question_num){\r\n\t\t\t  let category = this.state.questions[index].questionCategory;\r\n\t\t\t  if (this.state.questions[index].mark===\"markedanswered\" || this.state.questions[index].mark===\"marked\") {\r\n\t\t\t\tbutton = <Button variant=\"danger\" onClick={this.UNMarkQuestion}>UNMARK</Button>\r\n\t\t\t  }else {\r\n\t\t\t\tbutton = <Button variant=\"primary\" onClick={this.MarkQuestion}>MARK</Button>\r\n\t\t\t  }\r\n\t\t\t  if(category==1){\r\n\t\t\t\ttype = \"multiple_opt\";\r\n\t\t\t  }else if(category==26){\r\n                type = \"single_opt\";\r\n\t\t\t  }else if(category==4 || category==7 || category==5){\r\n\t\t\t\ttype = \"num_opt\";\r\n\t\t\t\tif(this.state.questions[index].answered){\r\n                    text = <input type=\"number\"  name=\"numberic\" defaultValue={this.state.questions[index].answered}  onKeyUp={this.handleKeyUp} />;\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttext = <input type=\"number\" name=\"numberic\" defaultValue=\"\" onKeyUp={this.handleKeyUp} />;\r\n\t\t\t\t}\r\n\t\t\t  }else if(category==0){\r\n\t\t\t\ttype = \"num_opt\";\r\n\t\t\t\tthis.state.questions[index].choices = [];\r\n\t\t\t\tif(this.state.questions[index].answered){\r\n                    text = <textarea name=\"numberic\" defaultValue={this.state.questions[index].answered}  onKeyUp={this.handleKeyUp} />;\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttext = <textarea name=\"numberic\" defaultValue=\"\" onKeyUp={this.handleKeyUp} />;\r\n\t\t\t\t} \r\n\t\t\t  \r\n\t\t\t  }else if(category==2){\r\n\t\t\t\tlet list = []; let opt = [];let match = [];\r\n\t\t\t\tlet aplpha =  ['A','B','C','D','E','F'];\r\n\t\t\t\tlet aplpha2 =  ['P','Q','R','S','T','U'];\r\n\t\t\t\tvar choices = this.state.questions[index].choices;\r\n\t\t\t\tvar matches = this.state.questions[index].matches;\r\n\t\t\t\tvar answered = this.state.questions[index].answered || [];\r\n\t\t\t\tvar match_div = \"\";\tvar match_opt = \"\";\t\t\t\t\r\n\t\t\t\tfor(let i=0;i<choices.length;i++){\r\n\t\t\t\t\tlist.push(<tr><td>{aplpha[i]}. </td><td><div dangerouslySetInnerHTML={{ __html:choices[i].name}} /></td><td>{aplpha2[i]}. </td><td><div dangerouslySetInnerHTML={{ __html:matches[i].name}} /></td></tr>);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(let c=0; c<choices.length; c++) {\r\n\t\t\t\topt.push(<label className=\"option_container\"><span className=\"mark\">{aplpha[c]}. </span></label>);\r\n\t\t\t\t\tfor(let m=0; m<matches.length; m++) {\r\n\t\t\t\t\t    if(c==0){\r\n\t\t\t\t\t\t  match.push(<label className=\"option_container\"><span className=\"mark\">{aplpha2[m]} </span></label>);\r\n\t\t\t\t\t\t}\r\n                        if(answered.includes(choices[c].id+':'+matches[m].id)){\r\n\t\t\t\t\t\t\topt.push(<label className=\"option_container\"><input defaultChecked=\"true\" className=\"option_checkbox\" type=\"checkbox\" value={choices[c].id+':'+matches[m].id}  onClick={this.getCheckeboxValue.bind(this)}/><span className=\"checkmark\"></span></label>);\r\n\t\t\t\t\t\t}else{\r\n                            opt.push(<label className=\"option_container\"><input className=\"option_checkbox\" type=\"checkbox\" value={choices[c].id+':'+matches[m].id}  onClick={this.getCheckeboxValue.bind(this)}/><span className=\"checkmark\"></span></label>);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t  \r\n\t\t\t\t\t}\r\n\t\t\t\t\topt.push(<br/>);\r\n\t\t\t\t\topt.push(<br/>);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t    match_opt = <div className=\"match_opts\"><p className=\"option\"><label className=\"option_container\"><span className=\"mark\"></span></label>{match}<br/><br/>{opt}</p></div>\r\n\t\t\t\t\r\n\t\t\t\tmatch_div = <table><tr><th></th><th><b>column I</b> </th><th></th><th><b>column II</b></th></tr>{list}</table>\r\n\t\t\t  }\r\n\t\t\t  return (\r\n\t\t\t     <div>\r\n\t\t\t      <div className=\"questionHeader\">\r\n\t\t\t\t       <div className=\"\">{this.state.questions[index].testSectionQuestionMapping.sectionName}</div> \r\n\t\t\t           <span className=\"question_num\">Q : {this.state.questions[index].questionNumber}; &nbsp; </span> \r\n\t\t\t\t\t   <span className=\"question_marks\">Mark : {this.state.questions[index].marks}; &nbsp;</span>\r\n\t\t\t\t\t   <span className=\"question_neg_marks\">Negative Mark : {this.state.questions[index].negativeMarks}; &nbsp;</span>\r\n\t\t\t\t\t   <span className=\"question_panel\"><FontAwesomeIcon icon={ faEye } onClick={this.openNav} /></span>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div className=\"question\"  id=\"questions_res\">\r\n\t\t\t\t      <div className=\"questionStatement\" dangerouslySetInnerHTML={{ __html: this.state.questions[index].groupQuestion}}></div>\r\n\t\t\t\t\t  <div className=\"questionStatement\" dangerouslySetInnerHTML={{ __html: this.state.questions[index].statement}}></div>\r\n\t\t\t\t\t  <div id={type}>\r\n\t\t\t\t\t   {match_div}\r\n\t\t\t\t\t   {match_opt}\r\n\t\t\t\t\t   { category!=2 && this.state.questions[index].choices.map((c, i) =>\r\n\t\t\t\t\t\t\t<p className=\"option\">\r\n\t\t\t\t\t\t\t <label className=\"option_container\">\r\n\t\t\t\t\t\t\t  <input className=\"option_checkbox\" id={'checkbox'+i} name=\"option\" defaultChecked={c.checked} type=\"checkbox\" value={c.id} onClick={this.getCheckeboxValue.bind(this)}/>\r\n\t\t\t\t\t\t\t  <span className=\"checkmark\"></span>\r\n\t\t\t\t\t\t\t  <div className=\"optiin_desc\" dangerouslySetInnerHTML={{ __html: c.name }}></div>\r\n\t\t\t\t\t\t\t </label>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t   )}\r\n\t\t\t\t\t   {text}\r\n\t\t\t\t\t   </div>\r\n\t\t\t\t  </div>\r\n\t\t\t\t </div>\r\n\t\t\t\t)\r\n\t\t     }\r\n\t\t  })\t\r\n\t\t}\r\n\t\t  <div class=\"testButtons\">\r\n\t\t\t<Button variant=\"primary\" onClick={this.PrevQuestion} disabled={this.prevDisabled()}>PREV</Button>\r\n\t\t\t<Button variant=\"primary\" onClick={this.NextQuestion} disabled={this.nextDisabled()}>NEXT</Button>\r\n\t\t\t {button}\r\n\t\t\t<Button variant=\"primary\" onClick={this.EndExamAlert}>FINISH</Button>\r\n\t\t\t<Button variant=\"primary\"  style={{display: \"none\"}} id=\"endExam\" onClick={this.EndExam}>End</Button>\r\n\t\t  </div>\r\n\t\t</div>\t \r\n     }\t\r\n}\r\n\r\nexport default TestTaking;"]},"metadata":{},"sourceType":"module"}