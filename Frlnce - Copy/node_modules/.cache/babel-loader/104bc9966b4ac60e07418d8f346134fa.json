{"ast":null,"code":"import axios from 'axios';\nimport Config from '../../_config/config';\n\nclass XAPIUtils {}\n\nXAPIUtils.createStatement = obj => {\n  var statement = {\n    \"actor\": {\n      \"name\": obj.lrsConfig.userName,\n      \"account\": {\n        \"homePage\": \"http://www.edusquares.org\",\n        \"name\": obj.lrsConfig.userName\n      }\n    },\n    \"object\": {\n      \"id\": obj.lrsConfig.accessUrl,\n      \"definition\": {\n        \"name\": {\n          \"en-US\": obj.name\n        },\n        \"description\": {\n          \"en-US\": obj.name\n        }\n      },\n      \"objectType\": \"Activity\"\n    }\n  };\n  statement[\"verb\"] = XAPIUtils.findVerb(obj.typeId);\n  return statement;\n};\n\nXAPIUtils.verbs = {\n  \"initialized\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/initialized\",\n    \"display\": {\n      \"en-US\": \"Video Initialized\"\n    }\n  },\n  \"played\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/played\",\n    \"display\": {\n      \"en-US\": \"Video Played\"\n    }\n  },\n  \"paused\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/paused\",\n    \"display\": {\n      \"en-US\": \"Video Paused\"\n    }\n  },\n  \"ended\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/ended\",\n    \"display\": {\n      \"en-US\": \"Video Ended\"\n    }\n  },\n  \"accessed\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/accessed\",\n    \"display\": {\n      \"en-US\": \"Resource Accessed\"\n    }\n  },\n  \"read\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/read\",\n    \"display\": {\n      \"en-US\": \"Resource Read\"\n    }\n  },\n  \"viewed\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/viewed\",\n    \"display\": {\n      \"en-US\": \"ResourceViewed\"\n    }\n  },\n  \"downloaded\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/downloaded\",\n    \"display\": {\n      \"en-US\": \"Resource Downloaded\"\n    }\n  },\n  \"started\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/started\",\n    \"display\": {\n      \"en-US\": \"Test Started\"\n    }\n  },\n  \"completed\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/completed\",\n    \"display\": {\n      \"en-US\": \"Test Completed\"\n    }\n  },\n  \"resumed\": {\n    \"id\": \"http://edusquares.com/xapi/verbs/resumed\",\n    \"display\": {\n      \"en-US\": \"Test Resumed\"\n    }\n  }\n};\n\nXAPIUtils.findVerb = typeId => {\n  switch (typeId) {\n    case 16:\n      return XAPIUtils.verbs.initialized;\n\n    case 6:\n      return XAPIUtils.verbs.viewed;\n\n    case -1:\n      return XAPIUtils.verbs.started;\n\n    case -2:\n      return XAPIUtils.verbs.resumed;\n\n    case -3:\n      return XAPIUtils.verbs.read;\n\n    case -4:\n      return XAPIUtils.verbs.downloaded;\n\n    case -5:\n      return XAPIUtils.verbs.played;\n  }\n\n  return XAPIUtils.verbs.accessed;\n};\n\nXAPIUtils.track = obj => {\n  let conf = obj.lrsConfig;\n  var statement = XAPIUtils.createStatement(obj);\n\n  if (obj.hasOwnProperty(\"ext\")) {\n    statement[\"result\"] = obj.ext.result;\n    statement[\"context\"] = obj.ext.context;\n  }\n\n  console.log(\"SENDING for LRS\");\n  XAPIUtils.trackkLrs(conf, statement).then(response => {\n    console.log(response);\n  });\n  console.log(\"SENDING for ANALYTICS\");\n  XAPIUtils.trackLearningAnalytics(statement).then(response => {\n    console.log(response);\n  });\n};\n\nXAPIUtils.trackkLrs = (conf, statement) => {\n  if (conf.enabled) {\n    try {\n      window.ADL.XAPIWrapper.changeConfig(conf.config);\n      var result = window.ADL.XAPIWrapper.sendStatement(statement);\n    } catch (err) {\n      console.log(\"FAILED TO CONNECT TO LSR ENDPOINT\");\n    }\n  } else {\n    console.log(\"XAPI NOT CONFIGURED\");\n  }\n\n  console.log(statement);\n  var response = {\n    message: \"success\",\n    obj: statement\n  };\n  return Promise.resolve(response);\n};\n\nXAPIUtils.trackLearningAnalytics = obj => {\n  let res = axios.post(Config.siteUrl + 'api/studyresources/learning/track/', obj);\n  let data = res.data;\n  var response = {\n    message: \"success\",\n    obj: data\n  };\n  return Promise.resolve(response);\n};\n\nexport default XAPIUtils;","map":{"version":3,"sources":["S:/REACT/Ract-Js/Frlnce/src/pages/xapi/xapiutils.js"],"names":["axios","Config","XAPIUtils","createStatement","obj","statement","lrsConfig","userName","accessUrl","name","findVerb","typeId","verbs","initialized","viewed","started","resumed","read","downloaded","played","accessed","track","conf","hasOwnProperty","ext","result","context","console","log","trackkLrs","then","response","trackLearningAnalytics","enabled","window","ADL","XAPIWrapper","changeConfig","config","sendStatement","err","message","Promise","resolve","res","post","siteUrl","data"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport Config from '../../_config/config';\r\nclass XAPIUtils {\r\n    static createStatement = (obj) => {\r\n        var statement = {\r\n            \"actor\": {\r\n                \"name\": obj.lrsConfig.userName,\r\n                \"account\": {\r\n                    \"homePage\": \"http://www.edusquares.org\",\r\n                    \"name\": obj.lrsConfig.userName\r\n                }\r\n            },\r\n            \"object\": {\r\n                \"id\": obj.lrsConfig.accessUrl,\r\n                \"definition\": {\r\n                    \"name\": {\"en-US\": obj.name},\r\n                    \"description\": {\"en-US\": obj.name,}\r\n                },\r\n                \"objectType\": \"Activity\"\r\n            }\r\n        }\r\n        statement[\"verb\"] = this.findVerb(obj.typeId);\r\n       return statement;\r\n    }\r\n    static verbs = {\"initialized\":{\"id\":\"http://edusquares.com/xapi/verbs/initialized\",\"display\":{\"en-US\":\"Video Initialized\"}},\"played\":{\"id\":\"http://edusquares.com/xapi/verbs/played\",\"display\":{\"en-US\":\"Video Played\"}},\"paused\":{\"id\":\"http://edusquares.com/xapi/verbs/paused\",\"display\":{\"en-US\":\"Video Paused\"}},\"ended\":{\"id\":\"http://edusquares.com/xapi/verbs/ended\",\"display\":{\"en-US\":\"Video Ended\"}},\"accessed\":{\"id\":\"http://edusquares.com/xapi/verbs/accessed\",\"display\":{\"en-US\":\"Resource Accessed\"}},\"read\":{\"id\":\"http://edusquares.com/xapi/verbs/read\",\"display\":{\"en-US\":\"Resource Read\"}},\"viewed\":{\"id\":\"http://edusquares.com/xapi/verbs/viewed\",\"display\":{\"en-US\":\"ResourceViewed\"}},\"downloaded\":{\"id\":\"http://edusquares.com/xapi/verbs/downloaded\",\"display\":{\"en-US\":\"Resource Downloaded\"}},\"started\":{\"id\":\"http://edusquares.com/xapi/verbs/started\",\"display\":{\"en-US\":\"Test Started\"}},\"completed\":{\"id\":\"http://edusquares.com/xapi/verbs/completed\",\"display\":{\"en-US\":\"Test Completed\"}},\"resumed\":{\"id\":\"http://edusquares.com/xapi/verbs/resumed\",\"display\":{\"en-US\":\"Test Resumed\"}}}\r\n    static findVerb = (typeId) => {\r\n        switch(typeId){\r\n            case 16:\r\n                return this.verbs.initialized;\r\n            case 6:\r\n                return this.verbs.viewed;\r\n            case -1:\r\n                return this.verbs.started;\r\n            case -2:\r\n                return this.verbs.resumed;\r\n            case -3:\r\n                return this.verbs.read;\r\n            case -4:\r\n                return this.verbs.downloaded;\r\n            case -5:\r\n                return this.verbs.played;\r\n        }\r\n        return this.verbs.accessed;\r\n    }\r\n\r\n    static track = (obj) => {\r\n        let conf = obj.lrsConfig;\r\n        var statement = this.createStatement(obj);\r\n        if(obj.hasOwnProperty(\"ext\")){\r\n            statement[\"result\"] = obj.ext.result;\r\n            statement[\"context\"] = obj.ext.context;\r\n        }\r\n        console.log(\"SENDING for LRS\")\r\n        this.trackkLrs(conf, statement).then((response) => {\r\n            console.log(response);\r\n        });\r\n        console.log(\"SENDING for ANALYTICS\")\r\n        this.trackLearningAnalytics(statement).then((response) => {\r\n          console.log(response);  \r\n        })\r\n    }\r\n    static trackkLrs = (conf,statement) => {\r\n        if(conf.enabled){\r\n            try{\r\n                window.ADL.XAPIWrapper.changeConfig(conf.config);\r\n                var result = window.ADL.XAPIWrapper.sendStatement(statement);\r\n            }\r\n            catch(err){\r\n                console.log(\"FAILED TO CONNECT TO LSR ENDPOINT\")\r\n            }\r\n        }\r\n        else{\r\n            console.log(\"XAPI NOT CONFIGURED\")\r\n        }\r\n        console.log(statement);\r\n        var response ={message:\"success\",obj:statement}\r\n        return Promise.resolve(response);\r\n    }\r\n\r\n    static trackLearningAnalytics = (obj) => {\r\n        let res = axios.post(Config.siteUrl+'api/studyresources/learning/track/', obj);\r\n        let data = res.data;\r\n        var response ={message:\"success\",obj:data}\r\n        return Promise.resolve(response);\r\n    }\r\n}\r\nexport default XAPIUtils;"]},"metadata":{},"sourceType":"module"}